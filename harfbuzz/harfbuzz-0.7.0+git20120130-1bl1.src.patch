--- origsrc/harfbuzz/configure.ac	2012-02-12 16:28:47.000000000 +0900
+++ src/harfbuzz/configure.ac	2012-02-12 16:37:29.928165400 +0900
@@ -52,9 +52,14 @@ AC_SUBST(HB_LIBTOOL_VERSION_INFO)
 dnl GTK_DOC_CHECK([1.15],[--flavour no-tmpl])
 
 # Functions and headers
-AC_CHECK_FUNCS(mprotect sysconf getpagesize mmap _setmode)
+AC_CHECK_FUNCS(mprotect sysconf getpagesize mmap)
 AC_CHECK_HEADERS(unistd.h sys/mman.h io.h)
 
+case "$host_os" in
+	cygwin*) ;;
+	*) AC_CHECK_FUNCS(_setmode);;
+esac
+
 # Compiler flags
 AC_CANONICAL_HOST
 if test "x$GCC" = "xyes"; then
