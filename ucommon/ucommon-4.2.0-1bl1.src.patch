--- origsrc/ucommon-4.2.0/common/Makefile.am	2011-03-18 08:43:43.000000000 +0900
+++ src/ucommon-4.2.0/common/Makefile.am	2011-03-26 19:59:22.200838800 +0900
@@ -14,7 +14,7 @@ AM_CXXFLAGS = -I$(top_srcdir)/inc $(UCOM
 
 lib_LTLIBRARIES = libucommon.la 
 
-libucommon_la_LDFLAGS = @UCOMMON_LIBS@ @UCOMMON_CLINK@ $(RELEASE) 
+libucommon_la_LDFLAGS = @UCOMMON_LIBS@ @UCOMMON_CLINK@ $(RELEASE) -no-undefined
 libucommon_la_SOURCES = object.cpp linked.cpp string.cpp mapped.cpp \
 	counter.cpp bitmap.cpp timer.cpp memory.cpp socket.cpp access.cpp \
 	thread.cpp fsys.cpp cpr.cpp vector.cpp xml.cpp stream.cpp persist.cpp \
--- origsrc/ucommon-4.2.0/configure.ac	2011-03-21 00:08:18.000000000 +0900
+++ src/ucommon-4.2.0/configure.ac	2011-03-26 19:59:22.209626600 +0900
@@ -20,8 +20,7 @@ AC_PROG_CPP
 AC_PROG_CC
 AC_PROG_CXXCPP
 AC_PROG_CXX
-AC_LIBTOOL_WIN32_DLL
-AM_PROG_LIBTOOL
+LT_INIT(win32-dll)
 AM_INIT_AUTOMAKE(ucommon, [$VERSION])
 AM_CONFIG_HEADER(config.h)
 
--- origsrc/ucommon-4.2.0/gnutls/Makefile.am	2011-03-18 08:43:40.000000000 +0900
+++ src/ucommon-4.2.0/gnutls/Makefile.am	2011-03-26 19:59:22.209626600 +0900
@@ -16,7 +16,7 @@ noinst_HEADERS = local.h
 
 lib_LTLIBRARIES = libusecure.la
 
-libusecure_la_LDFLAGS = ../common/libucommon.la @UCOMMON_LIBS@ @SECURE_LIBS@ @UCOMMON_CLINK@ $(RELEASE)
+libusecure_la_LDFLAGS = ../common/libucommon.la @UCOMMON_LIBS@ @SECURE_LIBS@ @UCOMMON_CLINK@ $(RELEASE) -no-undefined
 libusecure_la_SOURCES = secure.cpp ssl.cpp digest.cpp random.cpp cipher.cpp \
 	sstream.cpp
 
--- origsrc/ucommon-4.2.0/nossl/Makefile.am	2011-03-18 08:43:43.000000000 +0900
+++ src/ucommon-4.2.0/nossl/Makefile.am	2011-03-26 19:59:22.209626600 +0900
@@ -15,7 +15,7 @@ AM_CXXFLAGS = -I$(top_srcdir)/inc @UCOMM
 noinst_HEADERS = local.h
 lib_LTLIBRARIES = libusecure.la
 
-libusecure_la_LDFLAGS = ../common/libucommon.la @SECURE_LIBS@ @UCOMMON_LIBS@ @UCOMMON_CLINK@ $(RELEASE)
+libusecure_la_LDFLAGS = ../common/libucommon.la @SECURE_LIBS@ @UCOMMON_LIBS@ @UCOMMON_CLINK@ $(RELEASE) -no-undefined
 libusecure_la_SOURCES = secure.cpp ssl.cpp digest.cpp random.cpp cipher.cpp \
 	sstream.cpp
 
--- origsrc/ucommon-4.2.0/openssl/Makefile.am	2011-03-18 08:43:41.000000000 +0900
+++ src/ucommon-4.2.0/openssl/Makefile.am	2011-03-26 19:59:22.218414400 +0900
@@ -16,7 +16,7 @@ noinst_HEADERS = local.h
 
 lib_LTLIBRARIES = libusecure.la
 
-libusecure_la_LDFLAGS = ../common/libucommon.la @UCOMMON_LIBS@ @OPENSSL_LIBS@ @UCOMMON_CLINK@ $(RELEASE)
+libusecure_la_LDFLAGS = ../common/libucommon.la @UCOMMON_LIBS@ @OPENSSL_LIBS@ @UCOMMON_CLINK@ $(RELEASE) -no-undefined
 libusecure_la_SOURCES = secure.cpp ssl.cpp digest.cpp random.cpp cipher.cpp \
 	sstream.cpp
 
