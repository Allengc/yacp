--- origsrc/libresource/Makefile.am	2011-04-29 12:16:08.000000000 +0900
+++ src/libresource/Makefile.am	2011-04-29 12:23:31.513878200 +0900
@@ -1,3 +1,5 @@
+ACLOCAL_AMFLAGS = -I m4
+
 EXTRA_DIST = autogen.sh build-aux/git-version-gen
 SUBDIRS    = src client examples tests
 
--- origsrc/libresource/configure.ac	2011-04-29 12:16:08.000000000 +0900
+++ src/libresource/configure.ac	2011-04-29 12:53:06.725405300 +0900
@@ -16,6 +16,7 @@ AC_CONFIG_HEADERS([config.h])
 AC_SUBST(ACLOCAL_AMFLAGS, "-I m4")
 
 AC_PROG_CC
+AM_PROG_CC_C_O
 AC_PROG_GCC_TRADITIONAL
 AC_GNU_SOURCE
 
--- origsrc/libresource/src/Makefile.am	2011-04-29 12:16:08.000000000 +0900
+++ src/libresource/src/Makefile.am	2011-04-29 12:34:48.853999300 +0900
@@ -8,7 +8,7 @@ libresource_la_CFLAGS = @DBUS_CFLAGS@ -I
 if DEBUG
 libresource_la_CFLAGS += -D__DEBUG__
 endif
-libresource_la_LDFLAGS = /usr/lib -version-info @LIBRESOURCE_VERSION_INFO@
+libresource_la_LDFLAGS = /usr/lib -version-info @LIBRESOURCE_VERSION_INFO@ -no-undefined
 libresource_la_LIBADD = @DBUS_LIBS@
 
 libresource_glib_la_SOURCES = resource.c resource-glib-glue.c
@@ -17,7 +17,7 @@ libresource_glib_la_CFLAGS = @DBUS_CFLAG
 if DEBUG
 libresource_glib_la_CFLAGS += -D__DEBUG__
 endif
-libresource_glib_la_LDFLAGS = /usr/lib -version-info @LIBRESOURCE_VERSION_INFO@
+libresource_glib_la_LDFLAGS = /usr/lib -version-info @LIBRESOURCE_VERSION_INFO@ -no-undefined
 libresource_glib_la_LIBADD = $(top_builddir)/src/libresource.la @DBUS_LIBS@
 
 
--- origsrc/libresource/tests/Makefile.am	2011-04-29 12:16:08.000000000 +0900
+++ src/libresource/tests/Makefile.am	2011-04-29 13:23:50.835423900 +0900
@@ -13,4 +13,4 @@ memory_leak_test_LDADD   = $(top_builddi
                 		   $(top_builddir)/src/libresource.la \
                            @DBUS_LIBS@
 
-noinst_PROGRAMS = resource_test memory_leak_test
+noinst_PROGRAMS = resource-test memory-leak-test
