--- origsrc/libiscsi-1.9.0/Makefile.am	2013-09-25 11:52:13.057591400 +0900
+++ src/libiscsi-1.9.0/Makefile.am	2013-09-25 11:54:33.159153900 +0900
@@ -53,7 +53,7 @@ bin_iscsi_readcapacity16_SOURCES = src/i
 
 # Other examples
 
-noinst_PROGRAMS += bin/iscsiclient
+bin_PROGRAMS += bin/iscsiclient
 bin_iscsiclient_SOURCES = examples/iscsiclient.c
 
 EXTRA_PROGRAMS += bin/iscsi-dd
@@ -61,7 +61,7 @@ bin_iscsi_dd_SOURCES = examples/iscsi-dd
 
 # libiscsi test tool
 
-noinst_PROGRAMS += bin/iscsi-test
+bin_PROGRAMS += bin/iscsi-test
 dist_noinst_HEADERS += test-tool/iscsi-support.h \
 		       test-tool/iscsi-test.h \
 		       test-tool/iscsi-test-cu.h
@@ -179,7 +179,7 @@ endif
 if ISCSITEST
 # libiscsi test tool using cunit
 
-noinst_PROGRAMS += bin/iscsi-test-cu
+bin_PROGRAMS += bin/iscsi-test-cu
 # dist_noinst_HEADERS += test-tool/iscsi-test-cu.h
 bin_iscsi_test_cu_CPPFLAGS = $(AM_CPPFLAGS) -I$(srcdir)/test-tool
 bin_iscsi_test_cu_LDFLAGS = -ldl -lcunit
--- origsrc/libiscsi-1.9.0/configure.ac	2013-09-25 11:52:13.073216400 +0900
+++ src/libiscsi-1.9.0/configure.ac	2013-09-25 11:58:31.708958600 +0900
@@ -12,7 +12,7 @@ AM_CONDITIONAL(LD_ISCSI,
                [expr "$host_os" : linux > /dev/null 2>&1])
 
 if test "$ac_cv_prog_gcc" = yes; then
-   WARN_CFLAGS="-Wall -W -Wshadow -Wstrict-prototypes -Wpointer-arith -Wcast-align -Wwrite-strings -Werror -Wno-strict-aliasing"
+   WARN_CFLAGS="-Wall -W -Wshadow -Wstrict-prototypes -Wpointer-arith -Wcast-align -Wwrite-strings -Wno-strict-aliasing"
 fi
 AC_SUBST(WARN_CFLAGS)
 
--- origsrc/libiscsi-1.9.0/test-tool/iscsi-support.c	2013-02-25 01:13:15.000000000 +0900
+++ src/libiscsi-1.9.0/test-tool/iscsi-support.c	2013-09-25 12:00:54.170872600 +0900
@@ -18,7 +18,9 @@
 */
 
 #define _GNU_SOURCE
+#if !defined(__CYGWIN__)
 #include <sys/syscall.h>
+#endif
 #include <dlfcn.h>
 #include <sys/types.h>
 #include <stdio.h>
--- origsrc/libiscsi-1.9.0/test-tool/iscsi-test-cu.c	2013-02-25 01:15:10.000000000 +0900
+++ src/libiscsi-1.9.0/test-tool/iscsi-test-cu.c	2013-09-25 12:03:00.467747600 +0900
@@ -18,7 +18,9 @@
 */
 
 #define _GNU_SOURCE
+#if !defined(__CYGWIN__)
 #include <sys/syscall.h>
+#endif
 #include <dlfcn.h>
 #include <sys/types.h>
 #include <stdio.h>
@@ -680,6 +682,9 @@ main(int argc, char *argv[])
 	}
 
 	/* XXX why is this done? */
+#if !defined(RTLD_NEXT)
+#define RTLD_NEXT RTLD_DEFAULT
+#endif
 	real_iscsi_queue_pdu = dlsym(RTLD_NEXT, "iscsi_queue_pdu");
 
 	if (tgt_url == NULL) {
--- origsrc/libiscsi-1.9.0/test-tool/iscsi-test.c	2013-02-19 10:46:58.000000000 +0900
+++ src/libiscsi-1.9.0/test-tool/iscsi-test.c	2013-09-25 11:52:15.604466400 +0900
@@ -18,7 +18,9 @@
 */
 
 #define _GNU_SOURCE
+#if !defined(__CYGWIN__)
 #include <sys/syscall.h>
+#endif
 #include <dlfcn.h>
 #include <sys/types.h>
 #include <stdio.h>
@@ -335,6 +337,9 @@ int main(int argc, const char *argv[])
 		POPT_TABLEEND
 	};
 
+#if !defined(RTLD_NEXT)
+#define RTLD_NEXT RTLD_DEFAULT
+#endif
 	real_iscsi_queue_pdu = dlsym(RTLD_NEXT, "iscsi_queue_pdu");
 
 	pc = poptGetContext(argv[0], argc, argv, popt_options, POPT_CONTEXT_POSIXMEHARDER);
