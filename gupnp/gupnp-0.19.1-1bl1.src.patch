--- origsrc/gupnp-0.19.1/configure.ac	2012-10-25 04:20:02.000000000 +0900
+++ src/gupnp-0.19.1/configure.ac	2012-11-04 23:24:28.097289800 +0900
@@ -132,7 +132,7 @@ GOBJECT_INTROSPECTION_CHECK([0.6.4])
 # vapigen
 AS_IF([test "x$found_introspection" = "xyes"],
       [
-       VALA_PROG_VAPIGEN([0.14])
+       VAPIGEN_CHECK
       ]
 )
 AM_CONDITIONAL([HAVE_VAPIGEN], [test "x$VAPIGEN" != "x"])
--- origsrc/gupnp-0.19.1/libgupnp/Makefile.am	2012-10-08 23:32:45.000000000 +0900
+++ src/gupnp-0.19.1/libgupnp/Makefile.am	2012-11-04 23:23:42.211547600 +0900
@@ -79,7 +79,7 @@ gupnp-marshal.h: gupnp-marshal.list
 
 BUILT_SOURCES = gupnp-marshal.c gupnp-marshal.h
 
-libgupnp_1_0_la_LDFLAGS = -version-info $(LTVERSION)
+libgupnp_1_0_la_LDFLAGS = -version-info $(LTVERSION) -no-undefined
 
 libgupnp_1_0_la_SOURCES = $(introspection_sources)		\
 			  http-headers.c			\
--- origsrc/gupnp-0.19.1/vala/Makefile.am	2012-10-08 23:32:46.000000000 +0900
+++ src/gupnp-0.19.1/vala/Makefile.am	2012-11-04 23:29:26.187551900 +0900
@@ -8,7 +8,7 @@ gupnp-1.0.stamp: $(top_builddir)/libgupn
 		$(srcdir)/gupnp-1.0-custom.vala
 	$(AM_V_GEN)$(VAPIGEN) --metadatadir=$(srcdir) \
 				  --pkg=libsoup-2.4 \
-			      --library=gupnp-1.0 --pkg=gio-2.0 --pkg=libxml-2.0 \
+			      --library=gupnp-1.0 --pkg=gio-2.0 --pkg=libxml-2.0 --pkg=gssdp-1.0 \
 			      $(top_builddir)/libgupnp/GUPnP-1.0.gir \
 				  $(srcdir)/gupnp-1.0-custom.vala && \
 	echo timestmap > $(@F)
