--- origsrc/libMAFSA/CMakeLists.txt	2012-09-30 17:09:25.000000000 +0900
+++ src/libMAFSA/CMakeLists.txt	2012-09-30 17:12:17.936729100 +0900
@@ -4,7 +4,7 @@ PROJECT (libMAFSA)
 SET (LIBMAFSA_VERSION 0.3.16)
 SET (LIBMAFSA_RPM_RELEASE 16)
 
-SET (CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fPIC -pipe -O3 -fomit-frame-pointer -funroll-loops -DNDEBUG -Wall -Werror")
+SET (CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fPIC -pipe -O3 -fomit-frame-pointer -funroll-loops -DNDEBUG -Wall")
 SET (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${CMAKE_C_FLAGS} -Wno-deprecated")
 
 SET (FIND_LIBRARY_USE_LIB64_PATHS TRUE)
@@ -26,7 +26,7 @@ INCLUDE_DIRECTORIES (include)
 SET (SMAFSA src/MAFSA/automaton.c)
 
 #ADD_LIBRARY (MAFCA STATIC ${SMAFCA})
-ADD_LIBRARY (MAFSA STATIC ${SMAFSA})
+ADD_LIBRARY (MAFSA SHARED ${SMAFSA})
 
 #SET (SMAFCA_EXLS src/test/exls_test.c)
 #SET (SMAFCA_UNIT src/test/unit_test.c   src/test/unit_adapter.c)
@@ -49,6 +49,7 @@ SET (LIBDIR lib)
 ENDIF (${CMAKE_SIZEOF_VOID_P} EQUAL 8)
 
 #INSTALL (TARGETS MAFCA DESTINATION ${LIBDIR})
-INSTALL (TARGETS MAFSA DESTINATION ${LIBDIR})
+INSTALL (TARGETS MAFSA RUNTIME DESTINATION bin ARCHIVE DESTINATION ${LIBDIR})
 INSTALL (DIRECTORY include/MAFSA DESTINATION include PATTERN ".*" EXCLUDE)
 
+set_target_properties(MAFSA PROPERTIES SOVERSION 0)
