--- origsrc/libmemcached-0.53/clients/ms_setting.h	2011-09-22 03:03:59.000000000 +0900
+++ src/libmemcached-0.53/clients/ms_setting.h	2011-10-10 18:23:25.407716800 +0900
@@ -13,6 +13,8 @@
 
 #include "ms_memslap.h"
 
+#include <sys/time.h>
+
 #ifdef __cplusplus
 extern "C" {
 #endif
--- origsrc/libmemcached-0.53/clients/ms_sigsegv.c	2011-09-22 03:03:59.000000000 +0900
+++ src/libmemcached-0.53/clients/ms_sigsegv.c	2011-10-10 18:22:19.402806400 +0900
@@ -28,6 +28,11 @@ int ms_setup_sigsegv(void);
 int ms_setup_sigpipe(void);
 int ms_setup_sigint(void);
 
+#if defined(__CYGWIN__)
+#define pandora_print_callstack(a) \
+    fprintf(a, \
+      "Stackdump not supported for this platform\n");
+#endif
 
 /* signal seg reaches, this function will run */
 static void ms_signal_segv(int signum, siginfo_t *info, void *ptr)
--- origsrc/libmemcached-0.53/win32/include.am	2011-09-22 03:03:59.000000000 +0900
+++ src/libmemcached-0.53/win32/include.am	2011-10-10 17:58:58.353011200 +0900
@@ -3,9 +3,7 @@
 # All paths should be given relative to the root
 noinst_HEADERS+= win32/wrappers.h
 
-if BUILD_WIN32_WRAPPERS
 libmemcached_libmemcached_la_LDFLAGS+=-no-undefined
 libmemcached_libmemcachedprotocol_la_LDFLAGS+=-no-undefined
 libmemcached_libmemcachedutil_la_LDFLAGS+=-no-undefined
 libhashkit_libhashkit_la_LDFLAGS+=-no-undefined
-endif
