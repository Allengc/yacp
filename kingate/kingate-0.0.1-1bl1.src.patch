--- origsrc/kingate-0.0.1/configure.ac	2005-02-14 08:47:53.000000000 +0900
+++ src/kingate-0.0.1/configure.ac	2010-11-29 00:36:37.999757700 +0900
@@ -7,7 +7,7 @@ AC_PROG_INSTALL
 AC_PROG_AWK
 AC_PROG_CXX
 AC_PROG_CC
-AC_PROG_LIBTOOL
+LT_INIT(win32-dll)
 
 AC_HEADER_STDC
 AC_CHECK_HEADERS([sys/types.h sys/stat.h])
--- origsrc/kingate-0.0.1/include/kingate/cgi_gateway.h	2005-04-01 05:35:17.000000000 +0900
+++ src/kingate-0.0.1/include/kingate/cgi_gateway.h	2010-11-29 01:20:55.440970500 +0900
@@ -172,7 +172,7 @@ namespace kingate {
 	     * Retrieve the CONTENT_LENGTH meta-variable (see RFC3875)
 	     * @return size of the request message body.
 	     */
-	    unsigned long cgi_gateway::content_length() const;
+	    unsigned long content_length() const;
 	    /**
 	     * Retrieve the CONTENT_TYPE meta-variable (see RFC3875)
 	     * @return media type of the request message body.
--- origsrc/kingate-0.0.1/src/Makefile.am	2005-04-01 04:23:15.000000000 +0900
+++ src/kingate-0.0.1/src/Makefile.am	2010-11-29 01:26:13.378141700 +0900
@@ -6,20 +6,22 @@ endif
 
 INCLUDES = -I${top_srcdir}/include -I${top_srcdir}
 AM_CXXFLAGS = ${KONFORKA_CFLAGS}
-LDADD = ${KONFORKA_LIBS}
 
 libkingate_la_SOURCES = \
     cgi_gateway.cc \
     cgi_interface.cc \
     util.cc
-libkingate_la_LDFLAGS = -version-info 2:0:0
+libkingate_la_LDFLAGS = -version-info 2:0:0 -no-undefined
+libkingate_la_LIBADD = @KONFORKA_LIBS@
 
 libkingate_fcgi_la_SOURCES = \
     fastcgi.cc
-libkingate_fcgi_la_LDFLAGS = -version-info 1:0:0
+libkingate_fcgi_la_LDFLAGS = -version-info 1:0:0 -no-undefined
+libkingate_fcgi_la_LIBADD = @KONFORKA_LIBS@
 
 libkingate_plaincgi_la_SOURCES = \
 	plaincgi.cc
-libkingate_plaincgi_la_LDFLAGS = -version-info 1:0:0
+libkingate_plaincgi_la_LDFLAGS = -version-info 1:0:0 -no-undefined
+libkingate_plaincgi_la_LIBADD = @KONFORKA_LIBS@
 
 EXTRA_DIST = ${libkingate_fcgi_la_SOURCES}
--- origsrc/kingate-0.0.1/src/cgi_gateway.cc	2005-04-01 05:47:16.000000000 +0900
+++ src/kingate-0.0.1/src/cgi_gateway.cc	2010-11-29 01:18:26.496799300 +0900
@@ -1,5 +1,7 @@
 #include <errno.h>
 #include <ctype.h>
+#include <cstdlib>
+#include <cstring>
 #include "kingate/cgi_gateway.h"
 #include "kingate/util.h"
 #include "kingate/exception.h"
--- origsrc/kingate-0.0.1/src/fastcgi.cc	2005-02-14 08:47:53.000000000 +0900
+++ src/kingate-0.0.1/src/fastcgi.cc	2010-11-29 01:32:28.697824900 +0900
@@ -1,6 +1,7 @@
 #include <unistd.h>
 #include <sys/types.h>
 #include <sys/stat.h>
+#include <cstring>
 #include "kingate/fastcgi.h"
 #include "kingate/exception.h"
 
--- origsrc/kingate-0.0.1/src/plaincgi.cc	2005-02-14 08:47:53.000000000 +0900
+++ src/kingate-0.0.1/src/plaincgi.cc	2010-11-29 01:30:57.717000900 +0900
@@ -1,6 +1,7 @@
 #include <unistd.h>
 #include <sys/types.h>
 #include <sys/stat.h>
+#include <cstring>
 #include "kingate/plaincgi.h"
 #include "kingate/exception.h"
 #include "config.h"
--- origsrc/kingate-0.0.1/src/util.cc	2005-04-01 00:29:47.000000000 +0900
+++ src/kingate-0.0.1/src/util.cc	2010-11-29 01:21:48.056628100 +0900
@@ -1,3 +1,5 @@
+#include <cstdlib>
+#include <cstring>
 #include "kingate/util.h"
 #include "kingate/exception.h"
 
