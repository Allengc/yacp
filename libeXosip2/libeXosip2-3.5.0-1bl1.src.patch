--- origsrc/libeXosip2-3.5.0/Makefile.am	2010-01-06 23:57:57.000000000 +0900
+++ src/libeXosip2-3.5.0/Makefile.am	2011-02-22 22:17:33.887672800 +0900
@@ -1,3 +1,4 @@
+ACLOCAL_INCLUDE = -I scripts
 
 EXTRA_DIST = README autogen.sh
 
--- origsrc/libeXosip2-3.5.0/configure.in	2011-01-04 21:06:06.000000000 +0900
+++ src/libeXosip2-3.5.0/configure.in	2011-02-22 22:16:07.934077600 +0900
@@ -44,7 +44,6 @@ dnl Initialize automake stuff
 AC_CONFIG_AUX_DIR(scripts)
 AC_CONFIG_HEADERS(config.h)
 AM_INIT_AUTOMAKE($PACKAGE, $VERSION)
-AM_ACLOCAL_INCLUDE(scripts)
 
 AC_CANONICAL_HOST
 
@@ -58,7 +57,7 @@ AC_PROG_INSTALL
 
 dnl enable --enable-shared and --disable-shared options
 LT_AC_PROG_SED
-AC_PROG_LIBTOOL
+LT_INIT(win32-dll)
 
 #AC_ENABLE_SHARED(yes)
 
@@ -364,9 +363,7 @@ AC_ARG_ENABLE(openssl,
 	enable_openssl=$enableval,enable_openssl="yes")
 
 if test "$enable_openssl" = "yes" ; then
-	AC_CHECK_HEADERS(openssl/ssl.h)
-	AC_CHECK_LIB(ssl,SSL_CTX_new,[EXOSIP_LIB="$EXOSIP_LIB -lssl"])
-	AC_CHECK_LIB(crypto,X509_get_issuer_name,[EXOSIP_LIB="$EXOSIP_LIB -lcrypto"])
+	PKG_CHECK_MODULES(SSL, openssl)
 fi
 
 AC_ARG_ENABLE(srvrec,
--- origsrc/libeXosip2-3.5.0/src/Makefile.am	2010-01-06 23:57:57.000000000 +0900
+++ src/libeXosip2-3.5.0/src/Makefile.am	2011-02-22 22:16:40.330661600 +0900
@@ -48,6 +48,6 @@ sdp_offans.c
 endif
 
 libeXosip2_la_LDFLAGS = -version-info $(LIBEXOSIP_SO_VERSION) -no-undefined
-libeXosip2_la_LIBADD = @EXOSIP_LIB@ @PTHREAD_LIBS@ $(OSIP_LIBS)
+libeXosip2_la_LIBADD = @EXOSIP_LIB@ @PTHREAD_LIBS@ $(OSIP_LIBS) @SSL_LIBS@
 
-INCLUDES = -I$(top_srcdir) -I$(top_srcdir)/include $(OSIP_CFLAGS)
+INCLUDES = -I$(top_srcdir) -I$(top_srcdir)/include $(OSIP_CFLAGS) @SSL_CFLAGS@
