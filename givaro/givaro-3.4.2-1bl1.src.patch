--- origsrc/givaro-3.4.2/configure.ac	2011-05-16 19:47:43.000000000 +0900
+++ src/givaro-3.4.2/configure.ac	2011-07-31 21:12:20.900538600 +0900
@@ -138,19 +138,6 @@ AC_C_BIGENDIAN(
   [AC_DEFINE(HAVE_LITTLE_ENDIAN, 1, [Define that architecture uses little endian storage])],
   [])
 
-echo "Creating symbolic link for compilation"
-if test ! -L src/kernel/system/givaro  ; then ln -s . src/kernel/system/givaro  ; fi
-if test ! -L src/kernel/bstruct/givaro ; then ln -s . src/kernel/bstruct/givaro ; fi
-if test ! -L src/kernel/integer/givaro ; then ln -s . src/kernel/integer/givaro ; fi
-if test ! -L src/kernel/memory/givaro  ; then ln -s . src/kernel/memory/givaro  ; fi
-if test ! -L src/kernel/rational/givaro; then ln -s . src/kernel/rational/givaro; fi
-if test ! -L src/kernel/zpz/givaro     ; then ln -s . src/kernel/zpz/givaro     ; fi
-if test ! -L src/kernel/gmp++/gmp++    ; then ln -s . src/kernel/gmp++/gmp++    ; fi
-if test ! -L src/library/matrix/givaro ; then ln -s . src/library/matrix/givaro ; fi
-if test ! -L src/library/poly1/givaro  ; then ln -s . src/library/poly1/givaro  ; fi
-if test ! -L src/library/tools/givaro  ; then ln -s . src/library/tools/givaro  ; fi
-if test ! -L src/library/vector/givaro ; then ln -s . src/library/vector/givaro ; fi
-
 
 # Create some useful data types of fixed, known lengths
 
@@ -259,3 +246,16 @@ tests/Makefile
 docs/Makefile
 ])
 AC_OUTPUT
+
+echo "Creating symbolic link for compilation"
+if test ! -L src/kernel/system/givaro  ; then ln -s $srcdir/src/kernel/system   src/kernel/system/givaro  ; fi
+if test ! -L src/kernel/bstruct/givaro ; then ln -s $srcdir/src/kernel/bstruct  src/kernel/bstruct/givaro ; fi
+if test ! -L src/kernel/integer/givaro ; then ln -s $srcdir/src/kernel/integer  src/kernel/integer/givaro ; fi
+if test ! -L src/kernel/memory/givaro  ; then ln -s $srcdir/src/kernel/memory   src/kernel/memory/givaro  ; fi
+if test ! -L src/kernel/rational/givaro; then ln -s $srcdir/src/kernel/rational src/kernel/rational/givaro; fi
+if test ! -L src/kernel/zpz/givaro     ; then ln -s $srcdir/src/kernel/zpz      src/kernel/zpz/givaro     ; fi
+if test ! -L src/kernel/gmp++/gmp++    ; then ln -s $srcdir/src/kernel/gmp++    src/kernel/gmp++/gmp++    ; fi
+if test ! -L src/library/matrix/givaro ; then ln -s $srcdir/src/library/matrix  src/library/matrix/givaro ; fi
+if test ! -L src/library/poly1/givaro  ; then ln -s $srcdir/src/library/poly1   src/library/poly1/givaro  ; fi
+if test ! -L src/library/tools/givaro  ; then ln -s $srcdir/src/library/tools   src/library/tools/givaro  ; fi
+if test ! -L src/library/vector/givaro ; then ln -s $srcdir/src/library/vector  src/library/vector/givaro ; fi
--- origsrc/givaro-3.4.2/src/Makefile.am	2011-05-13 00:27:50.000000000 +0900
+++ src/givaro-3.4.2/src/Makefile.am	2011-07-30 21:55:54.466883300 +0900
@@ -18,4 +18,4 @@ libgivaro_la_LIBADD= \
 	kernel/gmp++/libgmppp.la kernel/bstruct/libgivbstruct.la kernel/integer/libgivinteger.la kernel/memory/libgivmemory.la kernel/rational/libgivrational.la kernel/system/libgivsystem.la kernel/zpz/libgivzpz.la library/tools/libgivtools.la library/poly1/libgivpoly1.la
 
 # soname of libgivaro
-libgivaro_la_LDFLAGS = -version-info 2:2:2
+libgivaro_la_LDFLAGS = -version-info 2:2:2 -no-undefined
--- origsrc/givaro-3.4.2/src/kernel/bstruct/Makefile.am	2011-04-11 19:46:53.000000000 +0900
+++ src/givaro-3.4.2/src/kernel/bstruct/Makefile.am	2011-07-31 21:49:23.929000700 +0900
@@ -7,7 +7,7 @@
 AM_CPPFLAGS=-I$(top_srcdir)
 
 AM_CXXFLAGS = @DEFAULT_CFLAGS@
-AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/system -I$(top_srcdir)/src/kernel/memory
+AM_CPPFLAGS+= -I$(top_builddir)/src/kernel/system -I$(top_builddir)/src/kernel/memory
 
 pkginclude_HEADERS=     \
 	givarray0.h		    \
--- origsrc/givaro-3.4.2/src/kernel/gmp++/Makefile.am	2011-04-11 19:47:01.000000000 +0900
+++ src/givaro-3.4.2/src/kernel/gmp++/Makefile.am	2011-07-31 21:39:07.750865800 +0900
@@ -9,7 +9,7 @@ AM_CPPFLAGS=-I$(top_srcdir) ${GMP_VERSIO
 pkgincludesubdir=$(includedir)/gmp++
 
 AM_CXXFLAGS=@DEFAULT_CFLAGS@
-AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/memory -I$(top_srcdir)/src/kernel/system
+AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/memory -I$(top_builddir)/src/kernel/system
 
 pkgincludesub_HEADERS=\
 	gmp++.h		      \
--- origsrc/givaro-3.4.2/src/kernel/integer/Makefile.am	2011-04-11 19:47:12.000000000 +0900
+++ src/givaro-3.4.2/src/kernel/integer/Makefile.am	2011-07-31 21:44:54.469053600 +0900
@@ -7,7 +7,7 @@
 AM_CPPFLAGS=-I$(top_srcdir)  ${GMP_VERSION}
 
 AM_CXXFLAGS = @DEFAULT_CFLAGS@
-AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/memory  -I$(top_srcdir)/src/kernel/system -I$(top_srcdir)/src/kernel
+AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/memory  -I$(top_builddir)/src/kernel/system -I$(top_srcdir)/src/kernel
 
 pkginclude_HEADERS=         \
 	givinteger.h		    \
--- origsrc/givaro-3.4.2/src/kernel/memory/Makefile.am	2011-04-11 19:47:21.000000000 +0900
+++ src/givaro-3.4.2/src/kernel/memory/Makefile.am	2011-07-31 21:36:26.215249800 +0900
@@ -7,7 +7,7 @@
 AM_CPPFLAGS=-I$(top_srcdir)
 
 AM_CXXFLAGS=@DEFAULT_CFLAGS@
-AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/system
+AM_CPPFLAGS+= -I$(top_builddir)/src/kernel/system
 
 pkginclude_HEADERS= \
 	givaromm.h     	\
--- origsrc/givaro-3.4.2/src/kernel/rational/Makefile.am	2011-04-11 19:47:27.000000000 +0900
+++ src/givaro-3.4.2/src/kernel/rational/Makefile.am	2011-07-31 21:55:22.480603300 +0900
@@ -7,7 +7,7 @@
 AM_CPPFLAGS=-I$(top_srcdir)  ${GMP_VERSION}
 
 AM_CXXFLAGS = @DEFAULT_CFLAGS@
-AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/integer -I$(top_srcdir)/src/kernel -I$(top_srcdir)/src/kernel/system -I$(top_srcdir)/src/kernel/memory
+AM_CPPFLAGS+= -I$(top_builddir)/src/kernel/integer -I$(top_srcdir)/src/kernel -I$(top_builddir)/src/kernel/system -I$(top_srcdir)/src/kernel/memory
 
 pkginclude_HEADERS= \
 	givrational.h	\
--- origsrc/givaro-3.4.2/src/kernel/system/Makefile.am	2011-04-11 19:47:31.000000000 +0900
+++ src/givaro-3.4.2/src/kernel/system/Makefile.am	2011-07-31 21:32:35.954425500 +0900
@@ -7,7 +7,7 @@
 AM_CPPFLAGS=-I$(top_srcdir)
 
 AM_CXXFLAGS=@DEFAULT_CFLAGS@
-AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/memory
+AM_CPPFLAGS+= -I$(top_builddir)/src/kernel/memory
 
 pkginclude_HEADERS= \
 	givbasictype.h	\
--- origsrc/givaro-3.4.2/src/kernel/zpz/Makefile.am	2011-04-11 19:47:39.000000000 +0900
+++ src/givaro-3.4.2/src/kernel/zpz/Makefile.am	2011-07-31 22:06:55.143336200 +0900
@@ -7,7 +7,7 @@
 AM_CPPFLAGS=-I$(top_srcdir)  ${GMP_VERSION}
 
 AM_CXXFLAGS = @DEFAULT_CFLAGS@
-AM_CPPFLAGS+= -I$(top_srcdir)/src/kernel/integer -I$(top_srcdir)/src/kernel -I$(top_srcdir)/src/kernel/system -I$(top_srcdir)/src/kernel/memory -I$(top_srcdir)/src/kernel/bstruct
+AM_CPPFLAGS+= -I$(top_builddir)/src/kernel/integer -I$(top_srcdir)/src/kernel -I$(top_builddir)/src/kernel/system -I$(top_builddir)/src/kernel/memory -I$(top_builddir)/src/kernel/bstruct
 
 pkginclude_HEADERS=     \
 	StaticElement.h		\
--- origsrc/givaro-3.4.2/tests/Makefile.am	2011-04-14 05:25:20.000000000 +0900
+++ src/givaro-3.4.2/tests/Makefile.am	2011-07-31 22:42:04.420958500 +0900
@@ -9,10 +9,10 @@ check: $(BASE_TESTS)
 
 AM_CPPFLAGS=-I$(top_srcdir)
 AM_CXXFLAGS = @TESTS_CFLAGS@
-AM_CPPFLAGS += $(OPTFLAGS) $(GMP_CFLAGS) -I$(top_srcdir)/src/kernel/system -I$(top_srcdir)/src/kernel/memory -I$(top_srcdir)/src/kernel/zpz -I$(top_srcdir)/src/kernel/integer -I$(top_srcdir)/src/kernel -I$(top_srcdir)/src/library/poly1 -I$(top_srcdir)/src/kernel/bstruct -I$(top_srcdir)/src/library/tools
+AM_CPPFLAGS += $(OPTFLAGS) $(GMP_CFLAGS) -I$(top_builddir)/src/kernel/system -I$(top_builddir)/src/kernel/memory -I$(top_builddir)/src/kernel/zpz -I$(top_builddir)/src/kernel/integer -I$(top_srcdir)/src/kernel -I$(top_builddir)/src/library/poly1 -I$(top_builddir)/src/kernel/bstruct -I$(top_builddir)/src/library/tools
 
-LDADD = $(OPTLINKS) -L${top_srcdir}/src -L${top_srcdir}/src/.libs -lgivaro $(GMP_LIBS)
-AM_LDFLAGS=-static
+LDADD = $(OPTLINKS) $(top_builddir)/src/libgivaro.la $(GMP_LIBS)
+AM_LDFLAGS=
 
 BASIC_TESTS =          \
 		test-random    \
