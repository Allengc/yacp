--- origsrc/msgpack-0.5.6/configure.in	2011-04-24 00:17:45.000000000 +0900
+++ src/msgpack-0.5.6/configure.in	2011-05-18 01:16:36.212448800 +0900
@@ -25,7 +25,7 @@ fi
 AM_CONDITIONAL(ENABLE_CXX, test "$enable_cxx" != "no")
 
 
-AC_PROG_LIBTOOL
+LT_INIT
 AM_PROG_AS
 
 
--- origsrc/msgpack-0.5.6/src/Makefile.am	2011-04-24 00:14:57.000000000 +0900
+++ src/msgpack-0.5.6/src/Makefile.am	2011-05-18 01:17:57.188887200 +0900
@@ -14,7 +14,7 @@ libmsgpack_la_SOURCES += \
 endif
 
 # -version-info CURRENT:REVISION:AGE
-libmsgpack_la_LDFLAGS = -version-info 3:0:0
+libmsgpack_la_LDFLAGS = -version-info 3:0:0 -no-undefined
 
 
 # backward compatibility
@@ -27,7 +27,7 @@ libmsgpackc_la_SOURCES = \
 		vrefbuffer.c \
 		zone.c
 
-libmsgpackc_la_LDFLAGS = -version-info 2:0:0
+libmsgpackc_la_LDFLAGS = -version-info 2:0:0 -no-undefined
 
 
 nobase_include_HEADERS = \
--- origsrc/msgpack-0.5.6/test/Makefile.am	2011-04-24 00:14:57.000000000 +0900
+++ src/msgpack-0.5.6/test/Makefile.am	2011-05-18 01:30:53.744535300 +0900
@@ -1,7 +1,7 @@
 
-AM_CPPFLAGS   = -I../src
-AM_C_CPPFLAGS = -I../src
-AM_LDFLAGS = ../src/libmsgpack.la -lgtest_main -pthread
+AM_CPPFLAGS   = -I$(top_srcdir)/src
+AM_C_CPPFLAGS = -I$(top_srcdir)/src
+AM_LDFLAGS = $(top_builddir)/src/libmsgpack.la -lgtest_main -pthread
 
 check_PROGRAMS = \
 		zone \
