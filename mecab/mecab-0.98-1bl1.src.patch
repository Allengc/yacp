--- origsrc/mecab-0.98/src/Makefile.am	2008-09-14 02:01:17.000000000 +0900
+++ src/mecab-0.98/src/Makefile.am	2010-11-07 23:02:52.402822900 +0900
@@ -4,6 +4,7 @@ EXTRA_DIST = Makefile.msvc.in make.bat
 pkglibexecdir = ${libexecdir}/mecab
 INCLUDES = -DDIC_VERSION=$(DIC_VERSION) $(MECAB_WITHOUT_SHARE_DIC) $(MECAB_WITHOUT_MUTEX_LOCK) $(MECAB_USE_UTF8_ONLY) -DMECAB_DEFAULT_RC="\"$(MECAB_DEFAULT_RC)\""
 libmecab_la_LDFLAGS = -no-undefined -version-info $(LTVERSION)
+libmecab_la_LIBADD = $(LTLIBICONV)
 libmecab_la_SOURCES = utils.cpp utils.h eval.cpp iconv_utils.cpp iconv_utils.h \
                       dictionary_rewriter.h dictionary_rewriter.cpp dictionary_generator.cpp \
 	              dictionary_compiler.cpp context_id.h context_id.cpp \
--- origsrc/mecab-0.98/src/common.h	2009-05-31 12:16:43.000000000 +0900
+++ src/mecab-0.98/src/common.h	2010-11-07 22:46:22.829886900 +0900
@@ -7,6 +7,15 @@
 #ifndef MECAB_COMMON_H
 #define MECAB_COMMON_H
 
+// tricky macro for MSVC
+#if defined(_MSC_VER) || defined(__CYGWIN__)
+#define for if (0); else for
+/* why windows.h define such a generic macro */
+#undef max
+#undef min
+#define snprintf _snprintf
+#endif
+
 #include <setjmp.h>
 #include <cstdlib>
 #include <cstdio>
@@ -25,15 +34,6 @@
 #include "config.h"
 #endif
 
-// tricky macro for MSVC
-#if defined(_MSC_VER) || defined(__CYGWIN__)
-#define for if (0); else for
-/* why windows.h define such a generic macro */
-#undef max
-#undef min
-#define snprintf _snprintf
-#endif
-
 #define COPYRIGHT "MeCab: Yet Another Part-of-Speech and Morphological Analyzer\n\
 \nCopyright(C) 2001-2009 Taku Kudo \nCopyright(C) 2004-2008 Nippon Telegraph and Telephone Corporation\n"
 
