--- origsrc/xmlstarlet-1.2.1/Makefile.am	2011-05-24 05:45:02.000000000 +0900
+++ src/xmlstarlet-1.2.1/Makefile.am	2011-09-11 23:30:39.130916100 +0900
@@ -58,10 +58,12 @@ src/xml.o : version.h
 include examples/tests.mk
 
 # building executable
-bin_PROGRAMS = xml
+bin_PROGRAMS = xmlstarlet
 
 include src/sources.mk
-xml_SOURCES += version.h
+xmlstarlet_SOURCES += version.h
+xmlstarlet_CFLAGS = @LIBXML_CFLAGS@ @LIBXSLT_CFLAGS@ @LIBEXSLT_CFLAGS@
+xmlstarlet_LDADD = @LIBXML_LIBS@ @LIBXSLT_LIBS@ @LIBEXSLT_LIBS@
 
 # doc
 man_MANS = doc/xmlstarlet.1
--- origsrc/xmlstarlet-1.2.1/configure.ac	2011-07-08 06:50:46.000000000 +0900
+++ src/xmlstarlet-1.2.1/configure.ac	2011-09-11 23:22:53.912368900 +0900
@@ -12,10 +12,6 @@ AM_MAINTAINER_MODE
 [LIBXML_REQUIRED_VERSION=2.6.23]
 [LIBXSLT_REQUIRED_VERSION=1.1.9]
 
-XSTAR_LIB_ARGS_WITH([LIBXML], [with-src])
-XSTAR_LIB_ARGS_WITH([LIBXSLT], [with-src])
-XSTAR_LIB_ARGS_WITH([LIBICONV])
-
 AC_ARG_ENABLE([static-libs],
         [AS_HELP_STRING([--enable-static-libs],
                 [link statically with libxml2 and lib(e)xslt @<:@default=no@:>@])],
@@ -34,40 +30,9 @@ AM_PROG_CC_C_O
 AC_ARG_PROGRAM          dnl Transforming Program Names When Installing
 AC_PROG_SED
 
-
-XSTAR_LIB_CHECK([LIBXML], [xml2-config])
-
-AS_IF([test "x$LIBXML_SRCDIR" != x],
-      [LIBXML_INCDIR="$LIBXML_SRCDIR/include"])
-[: ${LIBXML_INCDIR="$LIBXML_PREFIX/include/libxml2"}]
-
-AS_IF([test "x$STATIC_LIBS" != xno],
-      [LIBXML_CPPFLAGS="-I$LIBXML_INCDIR -DLIBXML_STATIC"],
-      [LIBXML_CPPFLAGS="-I$LIBXML_INCDIR"])
-
-AS_IF([test "x$STATIC_LIBS" != xno],
-      [LIBXML_LIBS="$LIBXML_LIBDIR/libxml2.a"],
-      [LIBXML_LIBS="-lxml2"])
-[LIBXML_LDFLAGS="-L$LIBXML_LIBDIR"]
-
-
-XSTAR_LIB_CHECK([LIBXSLT], [xslt-config])
-
-AS_IF([test "x$LIBXSLT_SRCDIR" != x],
-      [LIBXSLT_INCDIR="$LIBXSLT_SRCDIR"
-       LIBXSLT_LDFLAGS="-L$LIBXSLT_SRCDIR/libexslt/.libs -L$LIBXSLT_SRCDIR/libxslt/.libs"
-       AS_IF([test "x$STATIC_LIBS" != xno],
-             [LIBXSLT_LIBS="$LIBXSLT_SRCDIR/libexslt/.libs/libexslt.a $LIBXSLT_SRCDIR/libxslt/.libs/libxslt.a"])],
-      [LIBXSLT_LDFLAGS="-L$LIBXSLT_LIBDIR"
-      AS_IF([test "x$STATIC_LIBS" != xno],
-             [LIBXSLT_LIBS="$LIBXSLT_LIBDIR/libexslt.a $LIBXSLT_LIBDIR/libxslt.a"])])
-
-AS_IF([test "x$STATIC_LIBS" = xno],
-      [LIBXSLT_LIBS="-lexslt -lxslt"])
-
-[: ${LIBXSLT_INCDIR="$LIBXSLT_PREFIX/include"}]
-[LIBXSLT_CPPFLAGS="-I$LIBXSLT_INCDIR"]
-
+PKG_CHECK_MODULES([LIBXML], [libxml-2.0])
+PKG_CHECK_MODULES([LIBXSLT], [libxslt])
+PKG_CHECK_MODULES([LIBEXSLT], [libexslt])
 
 [WIN32_EXTRA_LDFLAGS=]
 [WIN32_EXTRA_LIBS=]
--- origsrc/xmlstarlet-1.2.1/examples/command-help	2011-05-24 05:45:02.000000000 +0900
+++ src/xmlstarlet-1.2.1/examples/command-help	2011-09-11 23:34:52.168316100 +0900
@@ -6,5 +6,5 @@ fi
 
 for command in ed sel tr val fo el c14n ls esc unesc pyx p2x ; do
     ./xmlstarlet $command --help | ${SED:-sed} -n \
-        "s@^\\(Usage: \\).*xml$EXEEXT\\( $command\\).*@\\1xml\\2@p"
+        "s@^\\(Usage: \\).*xmlstarlet$EXEEXT\\( $command\\).*@\\1xmlstarlet\\2@p"
 done
--- origsrc/xmlstarlet-1.2.1/examples/results/command-help.out	2011-05-24 05:45:02.000000000 +0900
+++ src/xmlstarlet-1.2.1/examples/results/command-help.out	2011-09-11 23:39:16.181040900 +0900
@@ -1,12 +1,12 @@
-Usage: xml ed
-Usage: xml sel
-Usage: xml tr
-Usage: xml val
-Usage: xml fo
-Usage: xml el
-Usage: xml c14n
-Usage: xml ls
-Usage: xml esc
-Usage: xml unesc
-Usage: xml pyx
-Usage: xml p2x
+Usage: xmlstarlet ed
+Usage: xmlstarlet sel
+Usage: xmlstarlet tr
+Usage: xmlstarlet val
+Usage: xmlstarlet fo
+Usage: xmlstarlet el
+Usage: xmlstarlet c14n
+Usage: xmlstarlet ls
+Usage: xmlstarlet esc
+Usage: xmlstarlet unesc
+Usage: xmlstarlet pyx
+Usage: xmlstarlet p2x
--- origsrc/xmlstarlet-1.2.1/examples/xmlstarlet	2011-06-10 10:23:07.000000000 +0900
+++ src/xmlstarlet-1.2.1/examples/xmlstarlet	2011-09-11 23:20:43.008109700 +0900
@@ -1,6 +1,6 @@
 #!/bin/sh
 exepath=`dirname $0`
-xml="${abs_builddir-$exepath/..}"/xml
+xml="${abs_builddir-$exepath/..}"/xmlstarlet
 
 if [ x"$OSTYPE" = xmsys ] ; then
     exec "$exepath/xmlstarlet.msys" "$xml" "$@"
--- origsrc/xmlstarlet-1.2.1/src/sources.mk	2011-05-24 05:45:02.000000000 +0900
+++ src/xmlstarlet-1.2.1/src/sources.mk	2011-09-11 23:19:47.868823300 +0900
@@ -1,4 +1,4 @@
-xml_SOURCES =\
+xmlstarlet_SOURCES =\
 src/escape.h\
 src/trans.c\
 src/trans.h\
