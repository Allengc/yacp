--- origsrc/xmlstarlet-1.0.3/configure.ac	2010-11-18 04:47:55.000000000 +0900
+++ src/xmlstarlet-1.0.3/configure.ac	2010-12-12 17:15:20.807189200 +0900
@@ -7,7 +7,6 @@ AC_REVISION(AC_PACKAGE_VERSION)
 
 AM_INIT_AUTOMAKE([1.11 foreign -Wall])
 AM_SILENT_RULES
-AM_MAINTAINER_MODE
 
 [LIBXML_REQUIRED_VERSION=2.6.12]
 [LIBXSLT_REQUIRED_VERSION=1.1.9]
@@ -26,21 +25,9 @@ AC_PROG_CC
 AC_PROG_MAKE_SET
 AC_ARG_PROGRAM          dnl Transforming Program Names When Installing
 
-XSTAR_LIB_CHECK([LIBXML], [xml2-config])
-AS_IF([test "x$LIBXML_SRCDIR" != x],
-      [LIBXML_INCDIR="$LIBXML_SRCDIR/include"],
-      [: ${LIBXML_INCDIR="$LIBXML_PREFIX/include/libxml2"}])
-[LIBXML_LIBS="$LIBXML_LIBDIR/libxml2.a"]
-[LIBXML_CPPFLAGS="-DLIBXML_STATIC -I$LIBXML_INCDIR"]
-
-XSTAR_LIB_CHECK([LIBXSLT], [xslt-config])
-[: ${LIBXSLT_INCDIR="$LIBXSLT_PREFIX/include"}]
-AS_IF([test "x$LIBXSLT_SRCDIR" != x],
-      [LIBXSLT_INCDIR="$LIBXSLT_SRCDIR"
-       LIBXSLT_LIBS="$LIBXSLT_SRCDIR/libexslt/.libs/libexslt.a $LIBXSLT_SRCDIR/libxslt/.libs/libxslt.a"],
-      [LIBXSLT_LIBS="$LIBXSLT_LIBDIR/libexslt.a $LIBXSLT_LIBDIR/libxslt.a"])
-[: ${LIBSLT_INCDIR="$LIBXSLT_PREFIX/include"}]
-[LIBXSLT_CPPFLAGS="-I$LIBXSLT_INCDIR"]
+PKG_CHECK_MODULES([LIBXML], [libxml-2.0])
+PKG_CHECK_MODULES([LIBXSLT], [libxslt])
+PKG_CHECK_MODULES([LIBEXSLT], [libexslt])
 
 [WIN32_EXTRA_LDFLAGS=]
 [WIN32_EXTRA_LIBS=]
--- origsrc/xmlstarlet-1.0.3/examples/xmlstarlet	2010-11-11 08:42:26.000000000 +0900
+++ src/xmlstarlet-1.0.3/examples/xmlstarlet	2010-12-12 18:19:24.742584100 +0900
@@ -1,4 +1,4 @@
 #!/bin/sh
 
-../src/xml ${@+"$@"}
+../src/xmlstarlet ${@+"$@"}
 
--- origsrc/xmlstarlet-1.0.3/src/Makefile.am	2010-11-17 10:43:53.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/Makefile.am	2010-12-12 17:15:51.164388700 +0900
@@ -1,3 +1,5 @@
-bin_PROGRAMS = xml
+bin_PROGRAMS = xmlstarlet
 
-xml_SOURCES = xml.c xml_edit.c xml_ls.c xml_escape.c xml_pyx.c xml_depyx.c xml_select.c xml_trans.c xml_validate.c xml_format.c xml_elem.c xml_C14N.c trans.c binsert.c stack.c binsert.h stack.h trans.h escape.h strdup.h strdup.c
+xmlstarlet_SOURCES = xml.c xml_edit.c xml_ls.c xml_escape.c xml_pyx.c xml_depyx.c xml_select.c xml_trans.c xml_validate.c xml_format.c xml_elem.c xml_C14N.c trans.c binsert.c stack.c binsert.h stack.h trans.h escape.h strdup.h strdup.c
+xmlstarlet_CPPFLAGS = @LIBXML_CFLAGS@
+xmlstarlet_LDADD = @LIBXML_LIBS@ @LIBXSLT_LIBS@ @LIBEXSLT_LIBS@
--- origsrc/xmlstarlet-1.0.3/src/xml.c	2010-11-11 08:42:26.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml.c	2010-12-12 16:13:53.869896600 +0900
@@ -49,7 +49,7 @@ extern int escMain(int argc, char **argv
  */
 static const char usage_str_1[] = 
 "XMLStarlet Toolkit: Command line utilities for XML\n"
-"Usage: xml [<options>] <command> [<cmd-options>]\n";
+"Usage: xmlstarlet [<options>] <command> [<cmd-options>]\n";
 
 static const char usage_str_2[] = 
 "where <command> is one of:\n"
--- origsrc/xmlstarlet-1.0.3/src/xml_C14N.c	2010-11-15 00:47:45.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_C14N.c	2010-12-12 16:14:12.977371800 +0900
@@ -34,7 +34,7 @@
 
 static const char c14n_usage_str_1[] =
 "XMLStarlet Toolkit: XML canonicalization\n"
-"Usage: xml c14n <mode> <xml-file> [<xpath-file>] [<inclusive-ns-list>]\n"
+"Usage: xmlstarlet c14n <mode> <xml-file> [<xpath-file>] [<inclusive-ns-list>]\n"
 "where\n"
 "  <xml-file>   - input XML document file name (stdin is used if '-')\n"
 "  <xpath-file> - XML file containing XPath expression for\n"
--- origsrc/xmlstarlet-1.0.3/src/xml_depyx.c	2010-11-15 00:47:45.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_depyx.c	2010-12-12 16:14:58.002114200 +0900
@@ -38,7 +38,7 @@ THE SOFTWARE.
 
 static const char depyx_usage_str[] =
 "XMLStarlet Toolkit: Convert PYX into XML\n"
-"Usage: xml p2x [<pyx-file>]\n"
+"Usage: xmlstarlet p2x [<pyx-file>]\n"
 "where\n"
 "  <pyx-file> - input PYX document file name (stdin is used if missing)\n\n"
 "The PYX format is a line-oriented representation of\n"
--- origsrc/xmlstarlet-1.0.3/src/xml_edit.c	2010-11-15 01:18:43.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_edit.c	2010-12-12 16:15:23.038114200 +0900
@@ -109,7 +109,7 @@ static XmlEdAction ops[MAX_XML_ED_OPS];
  */
 static const char edit_usage_str_1[] =
 "XMLStarlet Toolkit: Edit XML document(s)\n"
-"Usage: xml ed <global-options> {<action>} [ <xml-file-or-uri> ... ]\n"
+"Usage: xmlstarlet ed <global-options> {<action>} [ <xml-file-or-uri> ... ]\n"
 "where\n"
 "  <global-options>  - global options for editing\n"
 "  <xml-file-or-uri> - input XML document file name/uri (stdin otherwise)\n\n";
--- origsrc/xmlstarlet-1.0.3/src/xml_elem.c	2010-11-11 08:42:26.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_elem.c	2010-12-12 16:15:38.460290200 +0900
@@ -67,7 +67,7 @@ typedef struct _elOptions {
 
 static const char elem_usage_str[] =
 "XMLStarlet Toolkit: Display element structure of XML document\n"
-"Usage: xml el [<options>] <xml-file>\n"
+"Usage: xmlstarlet el [<options>] <xml-file>\n"
 "where\n"
 "  <xml-file> - input XML document file name (stdin is used if missing)\n"
 "  <options> is one of:\n"
--- origsrc/xmlstarlet-1.0.3/src/xml_escape.c	2010-11-11 08:42:26.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_escape.c	2010-12-12 16:15:56.596368600 +0900
@@ -52,7 +52,7 @@ THE SOFTWARE.
 
 static const char escape_usage_str[] =
 "XMLStarlet Toolkit: %s special XML characters\n"
-"Usage: xml %s [<options>] [<string>]\n"
+"Usage: xmlstarlet %s [<options>] [<string>]\n"
 "where <options> are\n"
 "  --help      - print usage\n"
 "  (TODO: more to be added in future)\n"
--- origsrc/xmlstarlet-1.0.3/src/xml_format.c	2010-11-15 00:47:45.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_format.c	2010-12-12 16:16:14.401971800 +0900
@@ -73,7 +73,7 @@ typedef foOptions *foOptionsPtr;
  */
 static const char format_usage_str_1[] =
 "XMLStarlet Toolkit: Format XML document\n"
-"Usage: xml fo [<options>] <xml-file>\n"
+"Usage: xmlstarlet fo [<options>] <xml-file>\n"
 "where <options> are\n"
 "  -n or --noindent            - do not indent\n"
 "  -t or --indent-tab          - indent output with tabulation\n"
--- origsrc/xmlstarlet-1.0.3/src/xml_ls.c	2010-11-15 00:47:45.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_ls.c	2010-12-12 16:16:26.759741400 +0900
@@ -44,7 +44,7 @@ THE SOFTWARE.
 
 static const char ls_usage_str[] =
 "XMLStarlet Toolkit: List directory as XML\n"
-"Usage: xml ls\n"
+"Usage: xmlstarlet ls\n"
 "Lists current directory in XML format.\n"
 "Time is shown per ISO 8601 spec.\n"
 "\n";
--- origsrc/xmlstarlet-1.0.3/src/xml_pyx.c	2010-11-15 00:47:45.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_pyx.c	2010-12-12 16:16:38.937251800 +0900
@@ -23,7 +23,7 @@
  */
 static const char pyx_usage_str_1[] =
 "XMLStarlet Toolkit: Convert XML into PYX format (based on ESIS - ISO 8879)\n"
-"Usage: xml pyx {<xml-file>}\n"
+"Usage: xmlstarlet pyx {<xml-file>}\n"
 "where\n"
 "  <xml-file> - input XML document file name (stdin is used if missing)\n\n";
 
--- origsrc/xmlstarlet-1.0.3/src/xml_select.c	2010-11-14 01:56:13.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_select.c	2010-12-12 16:16:59.827290200 +0900
@@ -65,7 +65,7 @@ typedef selOptions *selOptionsPtr;
  */
 static const char select_usage_str_1[] =
 "XMLStarlet Toolkit: Select from XML document(s)\n"
-"Usage: xml sel <global-options> {<template>} [ <xml-file> ... ]\n"
+"Usage: xmlstarlet sel <global-options> {<template>} [ <xml-file> ... ]\n"
 "where\n"
 "  <global-options> - global options for selecting\n"
 "  <xml-file> - input XML document file name/uri (stdin is used if missing)\n"
--- origsrc/xmlstarlet-1.0.3/src/xml_trans.c	2010-11-15 00:47:45.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_trans.c	2010-12-12 16:17:14.848890200 +0900
@@ -47,7 +47,7 @@ THE SOFTWARE.
  */
 static const char trans_usage_str_1[] =
 "XMLStarlet Toolkit: Transform XML document(s) using XSLT\n"
-"Usage: xml tr [<options>] <xsl-file> {-p|-s <name>=<value>} [<xml-file>...]\n"
+"Usage: xmlstarlet tr [<options>] <xsl-file> {-p|-s <name>=<value>} [<xml-file>...]\n"
 "where\n"
 "  <xsl-file>      - main XSLT stylesheet for transformation\n"
 "  <xml-file>      - input XML document file/URL (stdin is used if missing)\n";
--- origsrc/xmlstarlet-1.0.3/src/xml_validate.c	2010-11-15 00:47:45.000000000 +0900
+++ src/xmlstarlet-1.0.3/src/xml_validate.c	2010-12-12 16:17:27.947725400 +0900
@@ -78,7 +78,7 @@ typedef ErrorInfo *ErrorInfoPtr;
  */
 static const char validate_usage_str_1[] =
 "XMLStarlet Toolkit: Validate XML document(s)\n"
-"Usage: xml val <options> [ <xml-file-or-uri> ... ]\n"
+"Usage: xmlstarlet val <options> [ <xml-file-or-uri> ... ]\n"
 "where <options>\n"
 "  -w or --well-formed        - validate well-formedness only (default)\n"
 "  -d or --dtd <dtd-file>     - validate against DTD\n";
