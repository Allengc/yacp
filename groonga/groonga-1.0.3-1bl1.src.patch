--- origsrc/groonga-1.0.3/configure.ac	2010-10-28 14:24:22.000000000 +0900
+++ src/groonga-1.0.3/configure.ac	2010-11-08 00:43:51.135137400 +0900
@@ -82,8 +82,7 @@ if test "$GCC" = "yes"; then
 #  CHECK_CFLAG([-Wwrite-strings])
 #  CHECK_CFLAG([-Winline])
 fi
-AC_LIBTOOL_WIN32_DLL
-AM_PROG_LIBTOOL
+LT_INIT(win32-dll)
 m4_ifdef([LT_OUTPUT], [LT_OUTPUT])
 
 AC_CONFIG_FILES([Makefile
--- origsrc/groonga-1.0.3/lib/ctx.c	2010-10-28 14:21:22.000000000 +0900
+++ src/groonga-1.0.3/lib/ctx.c	2010-11-09 01:54:26.829133800 +0900
@@ -2436,6 +2436,9 @@ grn_set_segv_handler(void)
 
   sigemptyset(&action.sa_mask);
   action.sa_sigaction = segv_handler;
+#if !defined(SA_ONSTACK)
+#define SA_ONSTACK 0
+#endif
   action.sa_flags = SA_SIGINFO | SA_ONSTACK;
 
   if (sigaction(SIGSEGV, &action, NULL)) {
