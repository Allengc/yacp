--- origsrc/konoha-0.7.1/build/Makefile.am	2010-12-24 16:36:51.000000000 +0900
+++ src/konoha-0.7.1/build/Makefile.am	2011-01-10 19:19:05.297078600 +0900
@@ -13,7 +13,7 @@ libkonoha_la_LDFLAGS = -no-undefined -re
 
 libkonoha_la_CFLAGS  = $(AM_CFLAGS) -O2 -Wall -Wformat -Wundef \
 -Wreturn-type -Wpointer-arith 
-AM_CPPFLAGS = -I../include
+AM_CPPFLAGS = -I$(top_srcdir)/include
 #if MINGW
 #AM_CPPFLAGS += -DKONOHA_ON_MINGW
 #endif
@@ -80,7 +80,7 @@ libkonoha_la_includekonoha07_HEADERS +=
 libkonoha_la_includekonoha07_HEADERS += ../include/konoha07/konoha_lkm.h
 libkonoha_la_includekonoha07_HEADERS += ../include/konoha07/konoha_config.h
 libkonoha_la_includekonoha07_HEADERS += ../include/konoha07/konoha_name.h
-sampledir = $(prefix)/konoha/sample
+sampledir = $(datadir)/konoha/sample
 dist_sample_SCRIPTS =
 dist_sample_SCRIPTS += ../dist/sample/readfile.k
 dist_sample_SCRIPTS += ../dist/sample/sort.k
@@ -92,7 +92,7 @@ dist_sample_SCRIPTS += ../dist/sample/er
 dist_sample_SCRIPTS += ../dist/sample/konohaget.k
 dist_sample_SCRIPTS += ../dist/sample/http.k
 dist_sample_SCRIPTS += ../dist/sample/main.k
-scriptklipdir = $(prefix)/konoha/script/klip
+scriptklipdir = $(datadir)/konoha/script/klip
 dist_scriptklip_SCRIPTS = ../dist/bin/klip.k
 klipdir = $(bindir)
 dist_klip_SCRIPTS = ../dist/bin/klip
--- origsrc/konoha-0.7.1/configure.ac	2010-12-27 18:50:02.000000000 +0900
+++ src/konoha-0.7.1/configure.ac	2011-01-10 17:59:50.939076800 +0900
@@ -27,8 +27,7 @@ AC_PROG_INSTALL
 # only compile shared library, not static.
 
 AC_DISABLE_STATIC
-#AC_LIBTOOL_WIN32_DLL
-AC_PROG_LIBTOOL
+LT_INIT(win32-dll)
 
 ########################################################################
 #--------------------------
--- origsrc/konoha-0.7.1/dist/bin/klip	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/bin/klip	2011-01-10 19:29:33.945749400 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 import "klip.k";
 //import "/usr/local/share/konoha/script/klip/klip.k"
--- origsrc/konoha-0.7.1/dist/bin/klip.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/bin/klip.k	2011-01-10 19:29:33.945749400 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 
 
--- origsrc/konoha-0.7.1/dist/sample/ao.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/ao.k	2011-01-10 19:29:09.220195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 using math.*;
 
--- origsrc/konoha-0.7.1/dist/sample/counter.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/counter.k	2011-01-10 19:29:09.220195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 class Counter {
     int count;
--- origsrc/konoha-0.7.1/dist/sample/err.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/err.k	2011-01-10 19:29:09.220195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 int fibo(int n) {
   if(n < 3) return n;
--- origsrc/konoha-0.7.1/dist/sample/fib.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/fib.k	2011-01-10 19:29:09.220195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 int fib(int n) {
     if(n<3) return 1;
--- origsrc/konoha-0.7.1/dist/sample/helloworld.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/helloworld.k	2011-01-10 19:29:09.230195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 void main(String[] argv) {
     // print "hello,world"
--- origsrc/konoha-0.7.1/dist/sample/http.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/http.k	2011-01-10 19:29:09.230195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 foreach(String line 
         from new InputStream("http://konoha.sourceforge.jp/script/fibo.k")) {
--- origsrc/konoha-0.7.1/dist/sample/konohaget	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/konohaget	2011-01-10 19:29:09.230195800 +0900
@@ -3,4 +3,4 @@
 void main(String[] args) {
 
 
-}
\ No newline at end of file
+}
--- origsrc/konoha-0.7.1/dist/sample/konohaget.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/konohaget.k	2011-01-10 19:29:09.230195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 CGIURL = "http://konoha.sourceforge.jp/cgi-bin/knhgetpkg.cgi"
 
--- origsrc/konoha-0.7.1/dist/sample/main.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/main.k	2011-01-10 19:29:09.230195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 void main(String[] argv) {
     foreach(s from argv) {
--- origsrc/konoha-0.7.1/dist/sample/readfile.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/readfile.k	2011-01-10 19:29:09.230195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 void readfile(String filename)
 {
--- origsrc/konoha-0.7.1/dist/sample/sort.k	2010-12-08 22:20:01.000000000 +0900
+++ src/konoha-0.7.1/dist/sample/sort.k	2011-01-10 19:29:09.230195800 +0900
@@ -1,4 +1,4 @@
-#!/usr/local/bin/konoha
+#!/usr/bin/konoha
 
 a = new int[10000];
 
--- origsrc/konoha-0.7.1/include/konoha07/konoha_deps.h	2010-12-24 14:44:11.000000000 +0900
+++ src/konoha-0.7.1/include/konoha07/konoha_deps.h	2011-01-10 18:27:13.118214500 +0900
@@ -118,6 +118,13 @@
 #define     K_OSDLLEXT ".so"
 #endif
 
+#if KONOHA_ON_CYGWIN
+#define     K_USING_POSIX    1
+#define     KONOHA_OS_ENCODING "UTF-8"
+#define     KONOHA_OS_LINEFEED "\n"
+#define     K_OSDLLEXT ".dll"
+#endif
+
 /* ------------------------------------------------------------------------ */
 
 #ifdef KONOHA_ON_LKM
--- origsrc/konoha-0.7.1/src/main/security.c	2010-12-24 14:44:11.000000000 +0900
+++ src/konoha-0.7.1/src/main/security.c	2011-01-10 18:25:54.194728100 +0900
@@ -46,7 +46,9 @@
 #include <netinet/in.h>
 #include <sys/param.h>
 #include <sys/uio.h>
+#ifndef KONOHA_ON_CYGWIN
 #include <sys/sysctl.h>
+#endif
 #include <unistd.h>
 #endif
 #ifdef KONOHA_ON_MACOSX
