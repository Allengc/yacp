--- origsrc/gmock-1.5.0/Makefile.am	2010-04-16 10:12:41.000000000 +0900
+++ src/gmock-1.5.0/Makefile.am	2010-11-12 11:32:53.565536400 +0900
@@ -28,6 +28,8 @@ endif
 lib_LTLIBRARIES = lib/libgmock.la lib/libgmock_main.la
 
 lib_libgmock_la_SOURCES = src/gmock-all.cc
+lib_libgmock_la_LIBADD = @GTEST_LIBS@
+lib_libgmock_la_LDFLAGS = -no-undefined
 
 pkginclude_HEADERS = include/gmock/gmock.h \
                      include/gmock/gmock-actions.h \
@@ -49,6 +51,7 @@ pkginclude_internal_HEADERS = \
 
 lib_libgmock_main_la_SOURCES = src/gmock_main.cc
 lib_libgmock_main_la_LIBADD = lib/libgmock.la
+lib_libgmock_main_la_LDFLAGS = -no-undefined
 
 # Build rules for tests. Automake's naming for some of these variables isn't
 # terribly obvious, so this is a brief reference:
--- origsrc/gmock-1.5.0/configure.ac	2010-04-16 10:12:41.000000000 +0900
+++ src/gmock-1.5.0/configure.ac	2010-11-12 10:03:06.688916600 +0900
@@ -22,7 +22,7 @@ AM_INIT_AUTOMAKE([1.9 dist-bzip2 dist-zi
 AC_PROG_CC
 AC_PROG_CXX
 AC_LANG([C++])
-AC_PROG_LIBTOOL
+LT_INIT(win32-dll)
 
 # TODO(chandlerc@google.com): Currently we aren't running the Python tests
 # against the interpreter detected by AM_PATH_PYTHON, and so we condition
