--- origsrc/sofia-sip-1.12.10/configure.ac	2008-12-09 00:40:10.000000000 +0900
+++ src/sofia-sip-1.12.10/configure.ac	2011-01-02 15:20:18.930891700 +0900
@@ -29,7 +29,6 @@ AC_SUBST(LIBVER_SOFIA_SIP_UA_GLIB_SOVER,
 SAC_CANONICAL_SYSTEM_CACHE_CHECK
 
 AM_INIT_AUTOMAKE
-AM_MAINTAINER_MODE
 AC_CONFIG_HEADERS([config.h])
 
 AC_GNU_SOURCE
@@ -45,7 +44,7 @@ AC_PROG_CPP
 AC_CHECK_PROG(ETAGS, etags, etags, echo)
 AC_CHECK_TOOL(AR, ar, ar)
 AC_CHECK_TOOL(LD, ld, ld)
-AC_PROG_LIBTOOL
+LT_INIT(win32-dll)
 
 SAC_ENABLE_NDEBUG
 SAC_ENABLE_EXPENSIVE_CHECKS
--- origsrc/sofia-sip-1.12.10/libsofia-sip-ua/Makefile.am	2008-11-28 08:09:17.000000000 +0900
+++ src/sofia-sip-1.12.10/libsofia-sip-ua/Makefile.am	2011-01-02 15:21:16.307137200 +0900
@@ -58,7 +58,7 @@ libsofia_sip_ua_la_LIBADD = 	bnf/libbnf.
 # set the libtool version info version:revision:age for libsofia-sip-ua
 # - soname to 'libsofia-sip-ua.so.(CUR-AGE)'
 libsofia_sip_ua_la_LDFLAGS = \
-	-version-info $(LIBVER_SOFIA_SIP_UA_CUR):$(LIBVER_SOFIA_SIP_UA_REV):$(LIBVER_SOFIA_SIP_UA_AGE)
+	-version-info $(LIBVER_SOFIA_SIP_UA_CUR):$(LIBVER_SOFIA_SIP_UA_REV):$(LIBVER_SOFIA_SIP_UA_AGE) -no-undefined
 
 PHONY = doxygen built-sources
 
--- origsrc/sofia-sip-1.12.10/libsofia-sip-ua/su/su_time0.c	2008-11-27 21:14:17.000000000 +0900
+++ src/sofia-sip-1.12.10/libsofia-sip-ua/su/su_time0.c	2011-01-02 15:49:50.098032600 +0900
@@ -179,7 +179,7 @@ su_nanotime_t su_nanotime(su_nanotime_t
  */
 su_nanotime_t su_monotime(su_nanotime_t *return_time)
 {
-#if HAVE_CLOCK_GETTIME && CLOCK_MONOTONIC
+#if HAVE_CLOCK_GETTIME && defined(CLOCK_MONOTONIC)
   {
     struct timespec tv;
 
--- origsrc/sofia-sip-1.12.10/libsofia-sip-ua-glib/Makefile.am	2008-11-28 08:09:17.000000000 +0900
+++ src/sofia-sip-1.12.10/libsofia-sip-ua-glib/Makefile.am	2011-01-02 16:22:31.288085400 +0900
@@ -18,12 +18,12 @@ lib_LTLIBRARIES += libsofia-sip-ua-glib.
 endif
 
 libsofia_sip_ua_glib_la_SOURCES =
-libsofia_sip_ua_glib_la_LIBADD = $(GLIB_TARGETS) $(GLIB_LIBS)
+libsofia_sip_ua_glib_la_LIBADD = $(GLIB_TARGETS) $(GLIB_LIBS) $(top_builddir)/libsofia-sip-ua/libsofia-sip-ua.la
 
 # set the libtool version info version:revision:age for libsofia-sip-ua-glib
 # - soname to 'libsofia-sip-ua-glib.so.(CUR-AGE)'
 libsofia_sip_ua_glib_la_LDFLAGS = \
-	-version-info $(LIBVER_SOFIA_SIP_UA_GLIB_CUR):$(LIBVER_SOFIA_SIP_UA_GLIB_REV):$(LIBVER_SOFIA_SIP_UA_GLIB_AGE)
+	-version-info $(LIBVER_SOFIA_SIP_UA_GLIB_CUR):$(LIBVER_SOFIA_SIP_UA_GLIB_REV):$(LIBVER_SOFIA_SIP_UA_GLIB_AGE) -no-undefined
 
 DOXYGEN = doxygen
 
