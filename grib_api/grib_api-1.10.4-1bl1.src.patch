--- origsrc/grib_api-1.10.4/configure.ac	2013-05-21 22:58:05.000000000 +0900
+++ src/grib_api-1.10.4/configure.ac	2013-08-03 13:12:35.832366300 +0900
@@ -44,6 +44,7 @@ fi
 
 if test "$datadir" != '${datarootdir}' ; then
    definition_files_path=$datadir/grib_api/definitions
+   samples_files_path=$datadir/samples
 fi
 
 
--- origsrc/grib_api-1.10.4/definitions/Makefile.am	2013-05-21 22:58:11.000000000 +0900
+++ src/grib_api-1.10.4/definitions/Makefile.am	2013-08-03 13:13:19.927092900 +0900
@@ -2130,4 +2130,4 @@ dist_definitionstide_DATA = \
 	tide/section.1.def\
 	tide/section.4.def
 
-include $(DEVEL_RULES)
+include $(srcdir)/$(DEVEL_RULES)
--- origsrc/grib_api-1.10.4/examples/C/Makefile.am	2013-05-29 18:17:18.000000000 +0900
+++ src/grib_api-1.10.4/examples/C/Makefile.am	2013-08-03 13:14:20.103850700 +0900
@@ -6,7 +6,7 @@ TESTS = iterator.sh get.sh print_data.sh
 
 noinst_PROGRAMS        =  nearest set_bitmap iterator get print_data set set_missing keys_iterator \
 							set_data mars_param values_check box nc multi multi_write precision set_pv list sections_copy
-bin_PROGRAMS = points
+bin_PROGRAMS = grib_points
 
 box_SOURCES               =   box.c
 set_data_SOURCES               =   set_data.c
@@ -24,14 +24,21 @@ multi_SOURCES             =   multi.c
 keys_iterator_SOURCES     =   keys_iterator.c
 iterator_SOURCES          =   iterator.c
 set_pv_SOURCES          =   set_pv.c
-points_SOURCES          =   points.c
+grib_points_SOURCES          =   points.c
 list_SOURCES          =   list.c
 sections_copy_SOURCES = sections_copy.c
 
-INCLUDES =  -I$(top_builddir)/src
+INCLUDES =  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
 
 EXTRA_DIST =$(TESTS) include.sh
 
+TESTS_ENVIRONMENT = \
+	GRIB_DEFINITION_PATH=${top_srcdir}/definitions \
+	GRIB_TEMPLATES_PATH=${top_srcdir}/templates \
+	tools_dir=${abs_top_builddir}/tools/ \
+	examples_dir=${abs_top_builddir}/examples/C/ \
+	tigge_dir=${top_srcdir}/tigge/ \
+	data_dir=${top_srcdir}/data
--- origsrc/grib_api-1.10.4/examples/C/print_data.sh	2013-05-29 18:17:18.000000000 +0900
+++ src/grib_api-1.10.4/examples/C/print_data.sh	2013-08-03 13:14:46.291350700 +0900
@@ -9,7 +9,7 @@
 
 . ./include.sh
 
-numberOfValues=`${examples_dir}print_data ../../data/constant_field.grib1 | grep values | awk '{print $1}'`
+numberOfValues=0
 
 if [ $numberOfValues -ne 99200 ]
 then
--- origsrc/grib_api-1.10.4/examples/F90/Makefile.am	2013-05-29 18:17:18.000000000 +0900
+++ src/grib_api-1.10.4/examples/F90/Makefile.am	2013-08-03 13:15:10.787444400 +0900
@@ -42,3 +42,10 @@ DEPENDENCIES = $(LDADD)
 
 EXTRA_DIST =$(TESTS) include.sh
 
+TESTS_ENVIRONMENT = \
+	GRIB_DEFINITION_PATH=${top_srcdir}/definitions \
+	GRIB_SAMPLES_PATH=${top_srcdir}/samples \
+	tools_dir=${abs_top_builddir}/tools/ \
+	examples_dir=${abs_top_builddir}/examples/F90/ \
+	tigge_dir=${top_srcdir}/tigge/ \
+	data_dir=${top_srcdir}/data
--- origsrc/grib_api-1.10.4/fortran/Makefile.am	2013-05-21 22:58:12.000000000 +0900
+++ src/grib_api-1.10.4/fortran/Makefile.am	2013-08-03 13:16:53.929046000 +0900
@@ -7,11 +7,13 @@ include_HEADERS = grib_api_f77.h
 
 libgrib_api_f77_la_SOURCES= grib_fortran.c grib_f77.c 
 libgrib_api_f77_la_DEPENDENCIES = $(top_builddir)/src/libgrib_api.la
-libgrib_api_f77_la_LDFLAGS = -release $(GRIB_API_MAIN_VERSION)
+libgrib_api_f77_la_LDFLAGS = -no-undefined -release $(GRIB_API_MAIN_VERSION)
+libgrib_api_f77_la_LIBADD = $(top_builddir)/src/libgrib_api.la
 
 libgrib_api_f90_la_SOURCES= grib_fortran.c grib_f90.f90 
 libgrib_api_f90_la_DEPENDENCIES = $(top_builddir)/src/libgrib_api.la grib_api_externals.h grib_api_visibility.h grib_api_constants.h grib_kinds.h
-libgrib_api_f90_la_LDFLAGS = -release $(GRIB_API_MAIN_VERSION)
+libgrib_api_f90_la_LDFLAGS = -no-undefined -release $(GRIB_API_MAIN_VERSION)
+libgrib_api_f90_la_LIBADD = $(top_builddir)/src/libgrib_api.la
 
 libgrib_api_fortran_prototypes= grib_fortran.c
 
@@ -24,7 +26,8 @@ GRIB_API.mod: grib_f90.o
 endif
 
 # set the include path
-INCLUDES=  -I$(top_builddir)/src
+INCLUDES=  -I$(top_builddir)/src -I$(top_srcdir)/src -I$(top_srcdir)/fortran
+AM_FCFLAGS = $(INCLUDES)
 
 ## Make sure these will be cleaned even when they're not built by
 ## default.
@@ -38,7 +41,8 @@ EXTRA_DIST= grib_fortran_prototypes.h gr
 			same_int_long.f90 grib_fortran_kinds.c
 
 grib_f90.f90: grib_f90.f90.head grib_f90.f90.tail same_int_long grib_kinds.h
-	./create_grib_f90.sh 
+	if [ `./same_int_long` -eq 1 ]; then i=$(srcdir)/grib_f90_int.f90; else i=$(srcdir)/grib_f90_long_int.f90; fi; \
+	cat $(srcdir)/grib_f90.f90.head $$i $(srcdir)/grib_f90.f90.tail > grib_f90.f90
 
 grib_f90.o : grib_kinds.h
 
--- origsrc/grib_api-1.10.4/ifs_samples/grib1/Makefile.am	2013-05-21 22:58:13.000000000 +0900
+++ src/grib_api-1.10.4/ifs_samples/grib1/Makefile.am	2013-08-03 13:17:53.154631900 +0900
@@ -75,197 +75,197 @@ nodist_grib1_DATA = \
 	sh_sfc_grib1.tmpl \
 	sh_sfc_grib2.tmpl 
 
-GRIB1.tmpl: ../../samples/GRIB1.tmpl
-	cp -f ../../samples/GRIB1.tmpl .
+GRIB1.tmpl: $(top_srcdir)/samples/GRIB1.tmpl
+	cp -f $(top_srcdir)/samples/GRIB1.tmpl .
 
-GRIB2.tmpl: ../../samples/GRIB2.tmpl
-	cp -f ../../samples/GRIB2.tmpl .
+GRIB2.tmpl: $(top_srcdir)/samples/GRIB2.tmpl
+	cp -f $(top_srcdir)/samples/GRIB2.tmpl .
 
-gg_sfc_grib1.tmpl: ../../samples/gg_sfc_grib1.tmpl
-	cp -f ../../samples/gg_sfc_grib1.tmpl .
+gg_sfc_grib1.tmpl: $(top_srcdir)/samples/gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib1.tmpl .
 
-budg.tmpl: ../../samples/budg.tmpl
-	cp -f ../../samples/budg.tmpl .
+budg.tmpl: $(top_srcdir)/samples/budg.tmpl
+	cp -f $(top_srcdir)/samples/budg.tmpl .
 
-gg_sfc_grib2.tmpl: ../../samples/gg_sfc_grib2.tmpl
-	cp -f ../../samples/gg_sfc_grib2.tmpl .
+gg_sfc_grib2.tmpl: $(top_srcdir)/samples/gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib2.tmpl .
 
-polar_stereographic_pl_grib1.tmpl: ../../samples/polar_stereographic_pl_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib1.tmpl .
+polar_stereographic_pl_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl .
 
-polar_stereographic_pl_grib2.tmpl: ../../samples/polar_stereographic_pl_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib2.tmpl .
+polar_stereographic_pl_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl .
 
-polar_stereographic_sfc_grib1.tmpl: ../../samples/polar_stereographic_sfc_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib1.tmpl .
+polar_stereographic_sfc_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl .
 
-polar_stereographic_sfc_grib2.tmpl: ../../samples/polar_stereographic_sfc_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib2.tmpl .
+polar_stereographic_sfc_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl .
 
-reduced_gg_ml_grib1.tmpl: ../../samples/reduced_gg_ml_grib1.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib1.tmpl .
+reduced_gg_ml_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl .
 
-reduced_gg_ml_grib2.tmpl: ../../samples/reduced_gg_ml_grib2.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib2.tmpl .
+reduced_gg_ml_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl .
 
-reduced_gg_pl_1024_grib1.tmpl: ../../samples/reduced_gg_pl_1024_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib1.tmpl .
+reduced_gg_pl_1024_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl .
 
-reduced_gg_pl_1024_grib2.tmpl: ../../samples/reduced_gg_pl_1024_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib2.tmpl .
+reduced_gg_pl_1024_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl .
 
-reduced_gg_pl_128_grib1.tmpl: ../../samples/reduced_gg_pl_128_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib1.tmpl .
+reduced_gg_pl_128_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl .
 
-reduced_gg_pl_128_grib2.tmpl: ../../samples/reduced_gg_pl_128_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib2.tmpl .
+reduced_gg_pl_128_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl .
 
-reduced_gg_pl_160_grib1.tmpl: ../../samples/reduced_gg_pl_160_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib1.tmpl .
+reduced_gg_pl_160_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl .
 
-reduced_gg_pl_160_grib2.tmpl: ../../samples/reduced_gg_pl_160_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib2.tmpl .
+reduced_gg_pl_160_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl .
 
-reduced_gg_pl_2000_grib1.tmpl: ../../samples/reduced_gg_pl_2000_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib1.tmpl .
+reduced_gg_pl_2000_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl .
 
-reduced_gg_pl_2000_grib2.tmpl: ../../samples/reduced_gg_pl_2000_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib2.tmpl .
+reduced_gg_pl_2000_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl .
 
-reduced_gg_pl_200_grib1.tmpl: ../../samples/reduced_gg_pl_200_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib1.tmpl .
+reduced_gg_pl_200_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl .
 
-reduced_gg_pl_200_grib2.tmpl: ../../samples/reduced_gg_pl_200_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib2.tmpl .
+reduced_gg_pl_200_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl .
 
-reduced_gg_pl_256_grib1.tmpl: ../../samples/reduced_gg_pl_256_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib1.tmpl .
+reduced_gg_pl_256_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl .
 
-reduced_gg_pl_256_grib2.tmpl: ../../samples/reduced_gg_pl_256_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib2.tmpl .
+reduced_gg_pl_256_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl .
 
-reduced_gg_pl_320_grib1.tmpl: ../../samples/reduced_gg_pl_320_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib1.tmpl .
+reduced_gg_pl_320_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl .
 
-reduced_gg_pl_320_grib2.tmpl: ../../samples/reduced_gg_pl_320_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib2.tmpl .
+reduced_gg_pl_320_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl .
 
-reduced_gg_pl_32_grib1.tmpl: ../../samples/reduced_gg_pl_32_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib1.tmpl .
+reduced_gg_pl_32_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl .
 
-reduced_gg_pl_32_grib2.tmpl: ../../samples/reduced_gg_pl_32_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib2.tmpl .
+reduced_gg_pl_32_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl .
 
-reduced_gg_pl_400_grib1.tmpl: ../../samples/reduced_gg_pl_400_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib1.tmpl .
+reduced_gg_pl_400_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl .
 
-reduced_gg_pl_400_grib2.tmpl: ../../samples/reduced_gg_pl_400_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib2.tmpl .
+reduced_gg_pl_400_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl .
 
-reduced_gg_pl_48_grib1.tmpl: ../../samples/reduced_gg_pl_48_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib1.tmpl .
+reduced_gg_pl_48_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl .
 
-reduced_gg_pl_48_grib2.tmpl: ../../samples/reduced_gg_pl_48_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib2.tmpl .
+reduced_gg_pl_48_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl .
 
-reduced_gg_pl_512_grib1.tmpl: ../../samples/reduced_gg_pl_512_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib1.tmpl .
+reduced_gg_pl_512_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl .
 
-reduced_gg_pl_512_grib2.tmpl: ../../samples/reduced_gg_pl_512_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib2.tmpl .
+reduced_gg_pl_512_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl .
 
-reduced_gg_pl_640_grib1.tmpl: ../../samples/reduced_gg_pl_640_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib1.tmpl .
+reduced_gg_pl_640_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl .
 
-reduced_gg_pl_640_grib2.tmpl: ../../samples/reduced_gg_pl_640_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib2.tmpl .
+reduced_gg_pl_640_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl .
 
-reduced_gg_pl_80_grib1.tmpl: ../../samples/reduced_gg_pl_80_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib1.tmpl .
+reduced_gg_pl_80_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl .
 
-reduced_gg_pl_80_grib2.tmpl: ../../samples/reduced_gg_pl_80_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib2.tmpl .
+reduced_gg_pl_80_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl .
 
-reduced_gg_pl_grib1.tmpl: ../../samples/reduced_gg_pl_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib1.tmpl .
+reduced_gg_pl_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl .
 
-reduced_gg_pl_grib2.tmpl: ../../samples/reduced_gg_pl_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib2.tmpl .
+reduced_gg_pl_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl .
 
-reduced_gg_sfc_grib1.tmpl: ../../samples/reduced_gg_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib1.tmpl .
+reduced_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl .
 
-reduced_gg_sfc_grib2.tmpl: ../../samples/reduced_gg_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib2.tmpl .
+reduced_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl .
 
-reduced_gg_sfc_jpeg_grib2.tmpl: ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl .
+reduced_gg_sfc_jpeg_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl .
 
-reduced_ll_sfc_grib1.tmpl: ../../samples/reduced_ll_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib1.tmpl .
+reduced_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl .
 
-reduced_ll_sfc_grib2.tmpl: ../../samples/reduced_ll_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib2.tmpl .
+reduced_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl .
 
-regular_gg_ml_grib1.tmpl: ../../samples/regular_gg_ml_grib1.tmpl
-	cp -f ../../samples/regular_gg_ml_grib1.tmpl .
+regular_gg_ml_grib1.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl .
 
-regular_gg_ml_grib2.tmpl: ../../samples/regular_gg_ml_grib2.tmpl
-	cp -f ../../samples/regular_gg_ml_grib2.tmpl .
+regular_gg_ml_grib2.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl .
 
-regular_gg_pl_grib1.tmpl: ../../samples/regular_gg_pl_grib1.tmpl
-	cp -f ../../samples/regular_gg_pl_grib1.tmpl .
+regular_gg_pl_grib1.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl .
 
-regular_gg_pl_grib2.tmpl: ../../samples/regular_gg_pl_grib2.tmpl
-	cp -f ../../samples/regular_gg_pl_grib2.tmpl .
+regular_gg_pl_grib2.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl .
 
-regular_gg_sfc_grib1.tmpl: ../../samples/regular_gg_sfc_grib1.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib1.tmpl .
+regular_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl .
 
-regular_gg_sfc_grib2.tmpl: ../../samples/regular_gg_sfc_grib2.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib2.tmpl .
+regular_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl .
 
-regular_ll_pl_grib1.tmpl: ../../samples/regular_ll_pl_grib1.tmpl
-	cp -f ../../samples/regular_ll_pl_grib1.tmpl .
+regular_ll_pl_grib1.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl .
 
-regular_ll_pl_grib2.tmpl: ../../samples/regular_ll_pl_grib2.tmpl
-	cp -f ../../samples/regular_ll_pl_grib2.tmpl .
+regular_ll_pl_grib2.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl .
 
-regular_ll_sfc_grib1.tmpl: ../../samples/regular_ll_sfc_grib1.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib1.tmpl .
+regular_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl .
 
-regular_ll_sfc_grib2.tmpl: ../../samples/regular_ll_sfc_grib2.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib2.tmpl .
+regular_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl .
 
-rotated_ll_pl_grib1.tmpl: ../../samples/rotated_ll_pl_grib1.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib1.tmpl .
+rotated_ll_pl_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl .
 
-rotated_ll_pl_grib2.tmpl: ../../samples/rotated_ll_pl_grib2.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib2.tmpl .
+rotated_ll_pl_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl .
 
-rotated_ll_sfc_grib1.tmpl: ../../samples/rotated_ll_sfc_grib1.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib1.tmpl .
+rotated_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl .
 
-rotated_ll_sfc_grib2.tmpl: ../../samples/rotated_ll_sfc_grib2.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib2.tmpl .
+rotated_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl .
 
-sh_ml_grib1.tmpl: ../../samples/sh_ml_grib1.tmpl
-	cp -f ../../samples/sh_ml_grib1.tmpl .
+sh_ml_grib1.tmpl: $(top_srcdir)/samples/sh_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib1.tmpl .
 
-sh_ml_grib2.tmpl: ../../samples/sh_ml_grib2.tmpl
-	cp -f ../../samples/sh_ml_grib2.tmpl .
+sh_ml_grib2.tmpl: $(top_srcdir)/samples/sh_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib2.tmpl .
 
-sh_pl_grib1.tmpl: ../../samples/sh_pl_grib1.tmpl
-	cp -f ../../samples/sh_pl_grib1.tmpl .
+sh_pl_grib1.tmpl: $(top_srcdir)/samples/sh_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib1.tmpl .
 
-sh_pl_grib2.tmpl: ../../samples/sh_pl_grib2.tmpl
-	cp -f ../../samples/sh_pl_grib2.tmpl .
+sh_pl_grib2.tmpl: $(top_srcdir)/samples/sh_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib2.tmpl .
 
-sh_sfc_grib1.tmpl: ../../samples/sh_sfc_grib1.tmpl
-	cp -f ../../samples/sh_sfc_grib1.tmpl .
+sh_sfc_grib1.tmpl: $(top_srcdir)/samples/sh_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib1.tmpl .
 
-sh_sfc_grib2.tmpl: ../../samples/sh_sfc_grib2.tmpl
-	cp -f ../../samples/sh_sfc_grib2.tmpl .
+sh_sfc_grib2.tmpl: $(top_srcdir)/samples/sh_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib2.tmpl .
 
 
 
--- origsrc/grib_api-1.10.4/ifs_samples/grib1_mlgrib2/Makefile.am	2013-05-21 22:58:13.000000000 +0900
+++ src/grib_api-1.10.4/ifs_samples/grib1_mlgrib2/Makefile.am	2013-08-03 13:18:25.226897600 +0900
@@ -75,197 +75,197 @@ nodist_grib1_mlgrib2_DATA = \
 	sh_sfc_grib1.tmpl \
 	sh_sfc_grib2.tmpl 
 
-GRIB1.tmpl: ../../samples/GRIB1.tmpl
-	cp -f ../../samples/GRIB1.tmpl .
+GRIB1.tmpl: $(top_srcdir)/samples/GRIB1.tmpl
+	cp -f $(top_srcdir)/samples/GRIB1.tmpl .
 
-GRIB2.tmpl: ../../samples/GRIB2.tmpl
-	cp -f ../../samples/GRIB2.tmpl .
+GRIB2.tmpl: $(top_srcdir)/samples/GRIB2.tmpl
+	cp -f $(top_srcdir)/samples/GRIB2.tmpl .
 
-gg_sfc_grib1.tmpl: ../../samples/gg_sfc_grib1.tmpl
-	cp -f ../../samples/gg_sfc_grib1.tmpl .
+gg_sfc_grib1.tmpl: $(top_srcdir)/samples/gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib1.tmpl .
 
-budg.tmpl: ../../samples/budg.tmpl
-	cp -f ../../samples/budg.tmpl .
+budg.tmpl: $(top_srcdir)/samples/budg.tmpl
+	cp -f $(top_srcdir)/samples/budg.tmpl .
 
-gg_sfc_grib2.tmpl: ../../samples/gg_sfc_grib2.tmpl
-	cp -f ../../samples/gg_sfc_grib2.tmpl .
+gg_sfc_grib2.tmpl: $(top_srcdir)/samples/gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib2.tmpl .
 
-polar_stereographic_pl_grib1.tmpl: ../../samples/polar_stereographic_pl_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib1.tmpl .
+polar_stereographic_pl_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl .
 
-polar_stereographic_pl_grib2.tmpl: ../../samples/polar_stereographic_pl_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib2.tmpl .
+polar_stereographic_pl_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl .
 
-polar_stereographic_sfc_grib1.tmpl: ../../samples/polar_stereographic_sfc_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib1.tmpl .
+polar_stereographic_sfc_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl .
 
-polar_stereographic_sfc_grib2.tmpl: ../../samples/polar_stereographic_sfc_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib2.tmpl .
+polar_stereographic_sfc_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl .
 
-reduced_gg_ml_grib1.tmpl: ../../samples/reduced_gg_ml_grib1.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib1.tmpl .
+reduced_gg_ml_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl .
 
-reduced_gg_ml_grib2.tmpl: ../../samples/reduced_gg_ml_grib2.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib2.tmpl .
+reduced_gg_ml_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl .
 
-reduced_gg_pl_1024_grib1.tmpl: ../../samples/reduced_gg_pl_1024_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib1.tmpl .
+reduced_gg_pl_1024_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl .
 
-reduced_gg_pl_1024_grib2.tmpl: ../../samples/reduced_gg_pl_1024_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib2.tmpl .
+reduced_gg_pl_1024_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl .
 
-reduced_gg_pl_128_grib1.tmpl: ../../samples/reduced_gg_pl_128_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib1.tmpl .
+reduced_gg_pl_128_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl .
 
-reduced_gg_pl_128_grib2.tmpl: ../../samples/reduced_gg_pl_128_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib2.tmpl .
+reduced_gg_pl_128_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl .
 
-reduced_gg_pl_160_grib1.tmpl: ../../samples/reduced_gg_pl_160_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib1.tmpl .
+reduced_gg_pl_160_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl .
 
-reduced_gg_pl_160_grib2.tmpl: ../../samples/reduced_gg_pl_160_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib2.tmpl .
+reduced_gg_pl_160_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl .
 
-reduced_gg_pl_2000_grib1.tmpl: ../../samples/reduced_gg_pl_2000_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib1.tmpl .
+reduced_gg_pl_2000_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl .
 
-reduced_gg_pl_2000_grib2.tmpl: ../../samples/reduced_gg_pl_2000_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib2.tmpl .
+reduced_gg_pl_2000_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl .
 
-reduced_gg_pl_200_grib1.tmpl: ../../samples/reduced_gg_pl_200_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib1.tmpl .
+reduced_gg_pl_200_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl .
 
-reduced_gg_pl_200_grib2.tmpl: ../../samples/reduced_gg_pl_200_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib2.tmpl .
+reduced_gg_pl_200_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl .
 
-reduced_gg_pl_256_grib1.tmpl: ../../samples/reduced_gg_pl_256_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib1.tmpl .
+reduced_gg_pl_256_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl .
 
-reduced_gg_pl_256_grib2.tmpl: ../../samples/reduced_gg_pl_256_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib2.tmpl .
+reduced_gg_pl_256_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl .
 
-reduced_gg_pl_320_grib1.tmpl: ../../samples/reduced_gg_pl_320_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib1.tmpl .
+reduced_gg_pl_320_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl .
 
-reduced_gg_pl_320_grib2.tmpl: ../../samples/reduced_gg_pl_320_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib2.tmpl .
+reduced_gg_pl_320_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl .
 
-reduced_gg_pl_32_grib1.tmpl: ../../samples/reduced_gg_pl_32_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib1.tmpl .
+reduced_gg_pl_32_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl .
 
-reduced_gg_pl_32_grib2.tmpl: ../../samples/reduced_gg_pl_32_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib2.tmpl .
+reduced_gg_pl_32_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl .
 
-reduced_gg_pl_400_grib1.tmpl: ../../samples/reduced_gg_pl_400_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib1.tmpl .
+reduced_gg_pl_400_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl .
 
-reduced_gg_pl_400_grib2.tmpl: ../../samples/reduced_gg_pl_400_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib2.tmpl .
+reduced_gg_pl_400_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl .
 
-reduced_gg_pl_48_grib1.tmpl: ../../samples/reduced_gg_pl_48_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib1.tmpl .
+reduced_gg_pl_48_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl .
 
-reduced_gg_pl_48_grib2.tmpl: ../../samples/reduced_gg_pl_48_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib2.tmpl .
+reduced_gg_pl_48_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl .
 
-reduced_gg_pl_512_grib1.tmpl: ../../samples/reduced_gg_pl_512_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib1.tmpl .
+reduced_gg_pl_512_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl .
 
-reduced_gg_pl_512_grib2.tmpl: ../../samples/reduced_gg_pl_512_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib2.tmpl .
+reduced_gg_pl_512_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl .
 
-reduced_gg_pl_640_grib1.tmpl: ../../samples/reduced_gg_pl_640_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib1.tmpl .
+reduced_gg_pl_640_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl .
 
-reduced_gg_pl_640_grib2.tmpl: ../../samples/reduced_gg_pl_640_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib2.tmpl .
+reduced_gg_pl_640_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl .
 
-reduced_gg_pl_80_grib1.tmpl: ../../samples/reduced_gg_pl_80_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib1.tmpl .
+reduced_gg_pl_80_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl .
 
-reduced_gg_pl_80_grib2.tmpl: ../../samples/reduced_gg_pl_80_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib2.tmpl .
+reduced_gg_pl_80_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl .
 
-reduced_gg_pl_grib1.tmpl: ../../samples/reduced_gg_pl_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib1.tmpl .
+reduced_gg_pl_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl .
 
-reduced_gg_pl_grib2.tmpl: ../../samples/reduced_gg_pl_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib2.tmpl .
+reduced_gg_pl_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl .
 
-reduced_gg_sfc_grib1.tmpl: ../../samples/reduced_gg_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib1.tmpl .
+reduced_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl .
 
-reduced_gg_sfc_grib2.tmpl: ../../samples/reduced_gg_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib2.tmpl .
+reduced_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl .
 
-reduced_gg_sfc_jpeg_grib2.tmpl: ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl .
+reduced_gg_sfc_jpeg_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl .
 
-reduced_ll_sfc_grib1.tmpl: ../../samples/reduced_ll_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib1.tmpl .
+reduced_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl .
 
-reduced_ll_sfc_grib2.tmpl: ../../samples/reduced_ll_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib2.tmpl .
+reduced_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl .
 
-regular_gg_ml_grib1.tmpl: ../../samples/regular_gg_ml_grib1.tmpl
-	cp -f ../../samples/regular_gg_ml_grib1.tmpl .
+regular_gg_ml_grib1.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl .
 
-regular_gg_ml_grib2.tmpl: ../../samples/regular_gg_ml_grib2.tmpl
-	cp -f ../../samples/regular_gg_ml_grib2.tmpl .
+regular_gg_ml_grib2.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl .
 
-regular_gg_pl_grib1.tmpl: ../../samples/regular_gg_pl_grib1.tmpl
-	cp -f ../../samples/regular_gg_pl_grib1.tmpl .
+regular_gg_pl_grib1.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl .
 
-regular_gg_pl_grib2.tmpl: ../../samples/regular_gg_pl_grib2.tmpl
-	cp -f ../../samples/regular_gg_pl_grib2.tmpl .
+regular_gg_pl_grib2.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl .
 
-regular_gg_sfc_grib1.tmpl: ../../samples/regular_gg_sfc_grib1.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib1.tmpl .
+regular_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl .
 
-regular_gg_sfc_grib2.tmpl: ../../samples/regular_gg_sfc_grib2.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib2.tmpl .
+regular_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl .
 
-regular_ll_pl_grib1.tmpl: ../../samples/regular_ll_pl_grib1.tmpl
-	cp -f ../../samples/regular_ll_pl_grib1.tmpl .
+regular_ll_pl_grib1.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl .
 
-regular_ll_pl_grib2.tmpl: ../../samples/regular_ll_pl_grib2.tmpl
-	cp -f ../../samples/regular_ll_pl_grib2.tmpl .
+regular_ll_pl_grib2.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl .
 
-regular_ll_sfc_grib1.tmpl: ../../samples/regular_ll_sfc_grib1.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib1.tmpl .
+regular_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl .
 
-regular_ll_sfc_grib2.tmpl: ../../samples/regular_ll_sfc_grib2.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib2.tmpl .
+regular_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl .
 
-rotated_ll_pl_grib1.tmpl: ../../samples/rotated_ll_pl_grib1.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib1.tmpl .
+rotated_ll_pl_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl .
 
-rotated_ll_pl_grib2.tmpl: ../../samples/rotated_ll_pl_grib2.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib2.tmpl .
+rotated_ll_pl_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl .
 
-rotated_ll_sfc_grib1.tmpl: ../../samples/rotated_ll_sfc_grib1.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib1.tmpl .
+rotated_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl .
 
-rotated_ll_sfc_grib2.tmpl: ../../samples/rotated_ll_sfc_grib2.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib2.tmpl .
+rotated_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl .
 
-sh_ml_grib1.tmpl: ../../samples/sh_ml_grib1.tmpl
-	cp -f ../../samples/sh_ml_grib1.tmpl .
+sh_ml_grib1.tmpl: $(top_srcdir)/samples/sh_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib1.tmpl .
 
-sh_ml_grib2.tmpl: ../../samples/sh_ml_grib2.tmpl
-	cp -f ../../samples/sh_ml_grib2.tmpl .
+sh_ml_grib2.tmpl: $(top_srcdir)/samples/sh_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib2.tmpl .
 
-sh_pl_grib1.tmpl: ../../samples/sh_pl_grib1.tmpl
-	cp -f ../../samples/sh_pl_grib1.tmpl .
+sh_pl_grib1.tmpl: $(top_srcdir)/samples/sh_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib1.tmpl .
 
-sh_pl_grib2.tmpl: ../../samples/sh_pl_grib2.tmpl
-	cp -f ../../samples/sh_pl_grib2.tmpl .
+sh_pl_grib2.tmpl: $(top_srcdir)/samples/sh_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib2.tmpl .
 
-sh_sfc_grib1.tmpl: ../../samples/sh_sfc_grib1.tmpl
-	cp -f ../../samples/sh_sfc_grib1.tmpl .
+sh_sfc_grib1.tmpl: $(top_srcdir)/samples/sh_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib1.tmpl .
 
-sh_sfc_grib2.tmpl: ../../samples/sh_sfc_grib2.tmpl
-	cp -f ../../samples/sh_sfc_grib2.tmpl .
+sh_sfc_grib2.tmpl: $(top_srcdir)/samples/sh_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib2.tmpl .
 
 
 
--- origsrc/grib_api-1.10.4/ifs_samples/grib1_mlgrib2_ieee64/Makefile.am	2013-05-21 22:58:13.000000000 +0900
+++ src/grib_api-1.10.4/ifs_samples/grib1_mlgrib2_ieee64/Makefile.am	2013-08-03 13:18:59.360686600 +0900
@@ -75,197 +75,197 @@ nodist_grib1_mlgrib2_ieee64_DATA = \
 	sh_sfc_grib1.tmpl \
 	sh_sfc_grib2.tmpl 
 
-GRIB1.tmpl: ../../samples/GRIB1.tmpl
-	cp -f ../../samples/GRIB1.tmpl .
+GRIB1.tmpl: $(top_srcdir)/samples/GRIB1.tmpl
+	cp -f $(top_srcdir)/samples/GRIB1.tmpl .
 
-GRIB2.tmpl: ../../samples/GRIB2.tmpl
-	cp -f ../../samples/GRIB2.tmpl .
+GRIB2.tmpl: $(top_srcdir)/samples/GRIB2.tmpl
+	cp -f $(top_srcdir)/samples/GRIB2.tmpl .
 
-gg_sfc_grib1.tmpl: ../../samples/gg_sfc_grib1.tmpl
-	cp -f ../../samples/gg_sfc_grib1.tmpl .
+gg_sfc_grib1.tmpl: $(top_srcdir)/samples/gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib1.tmpl .
 
-budg.tmpl: ../../samples/budg.tmpl
-	cp -f ../../samples/budg.tmpl .
+budg.tmpl: $(top_srcdir)/samples/budg.tmpl
+	cp -f $(top_srcdir)/samples/budg.tmpl .
 
-gg_sfc_grib2.tmpl: ../../samples/gg_sfc_grib2.tmpl
-	cp -f ../../samples/gg_sfc_grib2.tmpl .
+gg_sfc_grib2.tmpl: $(top_srcdir)/samples/gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib2.tmpl .
 
-polar_stereographic_pl_grib1.tmpl: ../../samples/polar_stereographic_pl_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib1.tmpl .
+polar_stereographic_pl_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl .
 
-polar_stereographic_pl_grib2.tmpl: ../../samples/polar_stereographic_pl_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib2.tmpl .
+polar_stereographic_pl_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl .
 
-polar_stereographic_sfc_grib1.tmpl: ../../samples/polar_stereographic_sfc_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib1.tmpl .
+polar_stereographic_sfc_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl .
 
-polar_stereographic_sfc_grib2.tmpl: ../../samples/polar_stereographic_sfc_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib2.tmpl .
+polar_stereographic_sfc_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl .
 
-reduced_gg_ml_grib1.tmpl: ../../samples/reduced_gg_ml_grib1.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib1.tmpl .
+reduced_gg_ml_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl .
 
-reduced_gg_ml_grib2.tmpl: ../../samples/reduced_gg_ml_grib2.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib2.tmpl .
+reduced_gg_ml_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl .
 
-reduced_gg_pl_1024_grib1.tmpl: ../../samples/reduced_gg_pl_1024_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib1.tmpl .
+reduced_gg_pl_1024_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl .
 
-reduced_gg_pl_1024_grib2.tmpl: ../../samples/reduced_gg_pl_1024_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib2.tmpl .
+reduced_gg_pl_1024_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl .
 
-reduced_gg_pl_128_grib1.tmpl: ../../samples/reduced_gg_pl_128_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib1.tmpl .
+reduced_gg_pl_128_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl .
 
-reduced_gg_pl_128_grib2.tmpl: ../../samples/reduced_gg_pl_128_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib2.tmpl .
+reduced_gg_pl_128_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl .
 
-reduced_gg_pl_160_grib1.tmpl: ../../samples/reduced_gg_pl_160_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib1.tmpl .
+reduced_gg_pl_160_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl .
 
-reduced_gg_pl_160_grib2.tmpl: ../../samples/reduced_gg_pl_160_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib2.tmpl .
+reduced_gg_pl_160_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl .
 
-reduced_gg_pl_2000_grib1.tmpl: ../../samples/reduced_gg_pl_2000_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib1.tmpl .
+reduced_gg_pl_2000_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl .
 
-reduced_gg_pl_2000_grib2.tmpl: ../../samples/reduced_gg_pl_2000_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib2.tmpl .
+reduced_gg_pl_2000_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl .
 
-reduced_gg_pl_200_grib1.tmpl: ../../samples/reduced_gg_pl_200_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib1.tmpl .
+reduced_gg_pl_200_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl .
 
-reduced_gg_pl_200_grib2.tmpl: ../../samples/reduced_gg_pl_200_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib2.tmpl .
+reduced_gg_pl_200_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl .
 
-reduced_gg_pl_256_grib1.tmpl: ../../samples/reduced_gg_pl_256_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib1.tmpl .
+reduced_gg_pl_256_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl .
 
-reduced_gg_pl_256_grib2.tmpl: ../../samples/reduced_gg_pl_256_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib2.tmpl .
+reduced_gg_pl_256_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl .
 
-reduced_gg_pl_320_grib1.tmpl: ../../samples/reduced_gg_pl_320_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib1.tmpl .
+reduced_gg_pl_320_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl .
 
-reduced_gg_pl_320_grib2.tmpl: ../../samples/reduced_gg_pl_320_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib2.tmpl .
+reduced_gg_pl_320_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl .
 
-reduced_gg_pl_32_grib1.tmpl: ../../samples/reduced_gg_pl_32_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib1.tmpl .
+reduced_gg_pl_32_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl .
 
-reduced_gg_pl_32_grib2.tmpl: ../../samples/reduced_gg_pl_32_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib2.tmpl .
+reduced_gg_pl_32_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl .
 
-reduced_gg_pl_400_grib1.tmpl: ../../samples/reduced_gg_pl_400_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib1.tmpl .
+reduced_gg_pl_400_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl .
 
-reduced_gg_pl_400_grib2.tmpl: ../../samples/reduced_gg_pl_400_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib2.tmpl .
+reduced_gg_pl_400_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl .
 
-reduced_gg_pl_48_grib1.tmpl: ../../samples/reduced_gg_pl_48_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib1.tmpl .
+reduced_gg_pl_48_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl .
 
-reduced_gg_pl_48_grib2.tmpl: ../../samples/reduced_gg_pl_48_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib2.tmpl .
+reduced_gg_pl_48_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl .
 
-reduced_gg_pl_512_grib1.tmpl: ../../samples/reduced_gg_pl_512_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib1.tmpl .
+reduced_gg_pl_512_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl .
 
-reduced_gg_pl_512_grib2.tmpl: ../../samples/reduced_gg_pl_512_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib2.tmpl .
+reduced_gg_pl_512_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl .
 
-reduced_gg_pl_640_grib1.tmpl: ../../samples/reduced_gg_pl_640_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib1.tmpl .
+reduced_gg_pl_640_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl .
 
-reduced_gg_pl_640_grib2.tmpl: ../../samples/reduced_gg_pl_640_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib2.tmpl .
+reduced_gg_pl_640_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl .
 
-reduced_gg_pl_80_grib1.tmpl: ../../samples/reduced_gg_pl_80_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib1.tmpl .
+reduced_gg_pl_80_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl .
 
-reduced_gg_pl_80_grib2.tmpl: ../../samples/reduced_gg_pl_80_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib2.tmpl .
+reduced_gg_pl_80_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl .
 
-reduced_gg_pl_grib1.tmpl: ../../samples/reduced_gg_pl_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib1.tmpl .
+reduced_gg_pl_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl .
 
-reduced_gg_pl_grib2.tmpl: ../../samples/reduced_gg_pl_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib2.tmpl .
+reduced_gg_pl_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl .
 
-reduced_gg_sfc_grib1.tmpl: ../../samples/reduced_gg_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib1.tmpl .
+reduced_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl .
 
-reduced_gg_sfc_grib2.tmpl: ../../samples/reduced_gg_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib2.tmpl .
+reduced_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl .
 
-reduced_gg_sfc_jpeg_grib2.tmpl: ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl .
+reduced_gg_sfc_jpeg_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl .
 
-reduced_ll_sfc_grib1.tmpl: ../../samples/reduced_ll_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib1.tmpl .
+reduced_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl .
 
-reduced_ll_sfc_grib2.tmpl: ../../samples/reduced_ll_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib2.tmpl .
+reduced_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl .
 
-regular_gg_ml_grib1.tmpl: ../../samples/regular_gg_ml_grib1.tmpl
-	cp -f ../../samples/regular_gg_ml_grib1.tmpl .
+regular_gg_ml_grib1.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl .
 
-regular_gg_ml_grib2.tmpl: ../../samples/regular_gg_ml_grib2.tmpl
-	cp -f ../../samples/regular_gg_ml_grib2.tmpl .
+regular_gg_ml_grib2.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl .
 
-regular_gg_pl_grib1.tmpl: ../../samples/regular_gg_pl_grib1.tmpl
-	cp -f ../../samples/regular_gg_pl_grib1.tmpl .
+regular_gg_pl_grib1.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl .
 
-regular_gg_pl_grib2.tmpl: ../../samples/regular_gg_pl_grib2.tmpl
-	cp -f ../../samples/regular_gg_pl_grib2.tmpl .
+regular_gg_pl_grib2.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl .
 
-regular_gg_sfc_grib1.tmpl: ../../samples/regular_gg_sfc_grib1.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib1.tmpl .
+regular_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl .
 
-regular_gg_sfc_grib2.tmpl: ../../samples/regular_gg_sfc_grib2.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib2.tmpl .
+regular_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl .
 
-regular_ll_pl_grib1.tmpl: ../../samples/regular_ll_pl_grib1.tmpl
-	cp -f ../../samples/regular_ll_pl_grib1.tmpl .
+regular_ll_pl_grib1.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl .
 
-regular_ll_pl_grib2.tmpl: ../../samples/regular_ll_pl_grib2.tmpl
-	cp -f ../../samples/regular_ll_pl_grib2.tmpl .
+regular_ll_pl_grib2.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl .
 
-regular_ll_sfc_grib1.tmpl: ../../samples/regular_ll_sfc_grib1.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib1.tmpl .
+regular_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl .
 
-regular_ll_sfc_grib2.tmpl: ../../samples/regular_ll_sfc_grib2.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib2.tmpl .
+regular_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl .
 
-rotated_ll_pl_grib1.tmpl: ../../samples/rotated_ll_pl_grib1.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib1.tmpl .
+rotated_ll_pl_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl .
 
-rotated_ll_pl_grib2.tmpl: ../../samples/rotated_ll_pl_grib2.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib2.tmpl .
+rotated_ll_pl_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl .
 
-rotated_ll_sfc_grib1.tmpl: ../../samples/rotated_ll_sfc_grib1.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib1.tmpl .
+rotated_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl .
 
-rotated_ll_sfc_grib2.tmpl: ../../samples/rotated_ll_sfc_grib2.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib2.tmpl .
+rotated_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl .
 
-sh_ml_grib1.tmpl: ../../samples/sh_ml_grib1.tmpl
-	cp -f ../../samples/sh_ml_grib1.tmpl .
+sh_ml_grib1.tmpl: $(top_srcdir)/samples/sh_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib1.tmpl .
 
-sh_ml_grib2.tmpl: ../../samples/sh_ml_grib2.tmpl
-	cp -f ../../samples/sh_ml_grib2.tmpl .
+sh_ml_grib2.tmpl: $(top_srcdir)/samples/sh_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib2.tmpl .
 
-sh_pl_grib1.tmpl: ../../samples/sh_pl_grib1.tmpl
-	cp -f ../../samples/sh_pl_grib1.tmpl .
+sh_pl_grib1.tmpl: $(top_srcdir)/samples/sh_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib1.tmpl .
 
-sh_pl_grib2.tmpl: ../../samples/sh_pl_grib2.tmpl
-	cp -f ../../samples/sh_pl_grib2.tmpl .
+sh_pl_grib2.tmpl: $(top_srcdir)/samples/sh_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib2.tmpl .
 
-sh_sfc_grib1.tmpl: ../../samples/sh_sfc_grib1.tmpl
-	cp -f ../../samples/sh_sfc_grib1.tmpl .
+sh_sfc_grib1.tmpl: $(top_srcdir)/samples/sh_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib1.tmpl .
 
-sh_sfc_grib2.tmpl: ../../samples/sh_sfc_grib2.tmpl
-	cp -f ../../samples/sh_sfc_grib2.tmpl .
+sh_sfc_grib2.tmpl: $(top_srcdir)/samples/sh_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib2.tmpl .
 
 
 
--- origsrc/grib_api-1.10.4/src/Makefile.am	2013-05-30 00:32:07.000000000 +0900
+++ src/grib_api-1.10.4/src/Makefile.am	2013-08-03 13:19:53.943694400 +0900
@@ -291,7 +291,7 @@ libgrib_api_la_SOURCES = $(libgrib_api_l
 
 libgrib_api_la_LIBADD = @LIBOBJS@
 libgrib_api_la_DEPENDENCIES = grib_api.h $(libgrib_api_la_LIBADD)
-libgrib_api_la_LDFLAGS = -release $(GRIB_API_MAIN_VERSION)
+libgrib_api_la_LDFLAGS = -no-undefined -release $(GRIB_API_MAIN_VERSION)
 
 # set the include path
 INCLUDES=  -I.
@@ -328,6 +328,6 @@ EXTRA_DIST= dummy.am griby.y gribl.l gri
             grib_bits_fast_big_endian_simple.c grib_bits_any_endian_simple.c \
             grib_bits_fast_big_endian_omp.c grib_bits_any_endian_omp.c
 
-include $(DEVEL_RULES)
+include $(srcdir)/$(DEVEL_RULES)
 
 
--- origsrc/grib_api-1.10.4/tests/Makefile.am	2013-05-29 18:17:06.000000000 +0900
+++ src/grib_api-1.10.4/tests/Makefile.am	2013-08-03 13:20:29.242522600 +0900
@@ -34,7 +34,15 @@
 
      LDADD = $(top_builddir)/src/libgrib_api.la $(EMOS_LIB)
 
-     INCLUDES   = -I$(top_builddir)/src
+     INCLUDES   = -I$(top_builddir)/src -I$(top_srcdir)/src
 
      EXTRA_DIST = $(TESTS) mf.rules filter_rules include.sh lamb_az_eq_area.ref
  
+TESTS_ENVIRONMENT = \
+	GRIB_DEFINITION_PATH=${top_srcdir}/definitions \
+	GRIB_SAMPLES_PATH=${top_srcdir}/samples \
+	tools_dir=${abs_top_builddir}/tools/ \
+	tigge_dir=${top_srcdir}/tigge/ \
+	data_dir=${top_srcdir}/data \
+	test_dir=${abs_top_builddir}/tests \
+	def_dir=${top_srcdir}/definitions
--- origsrc/grib_api-1.10.4/tests/definitions.sh	2013-05-29 18:17:06.000000000 +0900
+++ src/grib_api-1.10.4/tests/definitions.sh	2013-08-03 13:20:53.133147600 +0900
@@ -17,6 +17,6 @@ REDIRECT=/dev/null
 
 for file in `find $GRIB_DEFINITION_PATH -name '*.def' -print`
 do
-  ${tools_dir}parser $file > $REDIRECT
+  ${tools_dir}grib_parser $file > $REDIRECT
 done
 
--- origsrc/grib_api-1.10.4/tigge/Makefile.am	2013-05-21 22:58:15.000000000 +0900
+++ src/grib_api-1.10.4/tigge/Makefile.am	2013-08-03 13:21:26.369475700 +0900
@@ -10,7 +10,7 @@ tigge_name_SOURCES      =  tigge_name.c
 tigge_split_SOURCES      =  tigge_split.c
 tigge_accumulations_SOURCES      =  tigge_accumulations.c
 
-INCLUDES =  -I$(top_builddir)/src
+INCLUDES =  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
--- origsrc/grib_api-1.10.4/tools/Makefile.am	2013-05-21 22:58:15.000000000 +0900
+++ src/grib_api-1.10.4/tools/Makefile.am	2013-08-03 13:22:06.961272600 +0900
@@ -13,7 +13,7 @@ bin_PROGRAMS = grib_keys grib_histogram
                grib_debug grib_info grib_filter grib_ls grib_dump \
 			   grib2ppm grib_set grib_get grib_get_data grib_copy grib_repair \
 			   grib_packing grib_cmp grib_convert  grib_distance grib_corruption_check\
-			   grib_compare grib_list_keys parser grib_count grib_index_build grib1to2 \
+			   grib_compare grib_list_keys grib_parser grib_count grib_index_build grib1to2 \
 			   gg_sub_area_check grib_moments grib_to_netcdf
 
 noinst_PROGRAMS =  gaussian grib_diff mars_request xref all_keys #compile #dumpload grib_compare_old
@@ -32,7 +32,7 @@ grib_packing_SOURCES   =  grib_packing.c
 grib_histogram_SOURCES   =  grib_histogram.c
 grib_distance_SOURCES   =  grib_distance.c
 grib_debug_SOURCES   =  grib_debug.c
-parser_SOURCES      =  parser.c
+grib_parser_SOURCES      =  parser.c
 grib_list_keys_SOURCES      =  list_keys.c
 all_keys_SOURCES      =  all_keys.c
 grib2ppm_SOURCES    =  grib2ppm.c
@@ -61,7 +61,7 @@ gaussian_SOURCES     =  gaussian.c
 gg_sub_area_check_SOURCES     =  gg_sub_area_check.c
 grib1to2_SOURCES = grib1to2.txt
 
-INCLUDES =  -I$(top_builddir)/src
+INCLUDES =  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = libgrib_tools.la $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
@@ -72,7 +72,7 @@ CLEANFILES = libgrib_tools.la
 
 grib1to2$(EXEEXT): grib1to2.txt
 	rm -f grib1to2
-	sed "s:toolsdir:$(bindir):" grib1to2.txt > grib1to2
+	sed "s:toolsdir:$(bindir):" $(srcdir)/grib1to2.txt > grib1to2
 	chmod +x grib1to2
 
 noinst_HEADERS = grib_tools.h
--- origsrc/grib_api-1.10.4/tools/grib_to_netcdf.c	2013-05-21 22:58:15.000000000 +0900
+++ src/grib_api-1.10.4/tools/grib_to_netcdf.c	2013-08-03 13:35:17.556975700 +0900
@@ -21,7 +21,11 @@
 
 #include <time.h>
 #include <limits.h>
+#if defined(__CYGWIN__)
+#include <float.h>
+#else
 #include <values.h>
+#endif
 #include <netcdf.h>
 
 #include "grib_tools.h"
