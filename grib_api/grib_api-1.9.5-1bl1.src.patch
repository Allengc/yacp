--- origsrc/grib_api-1.9.5/configure.ac	2011-01-02 02:34:34.170126200 +0900
+++ src/grib_api-1.9.5/configure.ac	2011-01-02 02:35:31.452494200 +0900
@@ -45,12 +45,11 @@ AC_PROG_CPP
 AC_PROG_INSTALL
 AC_PROG_LN_S
 AC_PROG_MAKE_SET
-AC_PROG_RANLIB
 AC_PROG_YACC
 AC_PROG_LEX
 AC_PROG_F77(pgf90 pgf77 xlf gfortran f77 g77 f90 ifort) 
 AC_PROG_FC(pgf90 xlf90 gfortran f90 ifort) 
-AC_PROG_LIBTOOL
+LT_INIT(win32-dll)
 
 dnl check availability of pthreads
 AC_ARG_ENABLE([pthread],
--- origsrc/grib_api-1.9.5/definitions/Makefile.am	2010-10-15 16:48:05.000000000 +0900
+++ src/grib_api-1.9.5/definitions/Makefile.am	2011-01-02 04:09:26.905354400 +0900
@@ -1803,4 +1803,4 @@ dist_definitionstide_DATA = \
 	tide/section.1.def\
 	tide/section.4.def
 
-include $(DEVEL_RULES)
+include $(srcdir)/$(DEVEL_RULES)
--- origsrc/grib_api-1.9.5/examples/C/Makefile.am	2011-01-02 02:34:34.330356600 +0900
+++ src/grib_api-1.9.5/examples/C/Makefile.am	2011-01-02 12:47:31.168724900 +0900
@@ -28,7 +28,7 @@ points_SOURCES          =   points.c
 list_SOURCES          =   list.c
 sections_copy_SOURCES = sections_copy.c
 
-INCLUDES =  -I$(top_builddir)/src
+INCLUDES =  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
--- origsrc/grib_api-1.9.5/fortran/Makefile.am	2011-01-02 02:34:34.360399800 +0900
+++ src/grib_api-1.9.5/fortran/Makefile.am	2011-01-02 02:36:23.807777400 +0900
@@ -7,9 +7,11 @@ include_HEADERS = grib_api_f77.h
 
 libgrib_api_f77_la_SOURCES= grib_fortran.c grib_f77.c 
 libgrib_api_f77_la_DEPENDENCIES = $(top_builddir)/src/libgrib_api.la
+libgrib_api_f77_la_LDFLAGS = -no-undefined
 
 libgrib_api_f90_la_SOURCES= grib_fortran.c grib_f90.f90 
 libgrib_api_f90_la_DEPENDENCIES = $(top_builddir)/src/libgrib_api.la grib_api_externals.h grib_api_visibility.h grib_api_constants.h grib_kinds.h
+libgrib_api_f90_la_LDFLAGS = -no-undefined
 
 libgrib_api_fortran_prototypes= grib_fortran.c
 
--- origsrc/grib_api-1.9.5/src/Makefile.am	2011-01-02 02:34:34.390443000 +0900
+++ src/grib_api-1.9.5/src/Makefile.am	2011-01-02 03:06:07.579742100 +0900
@@ -273,7 +273,7 @@ libgrib_api_la_SOURCES = $(libgrib_api_l
 
 libgrib_api_la_LIBADD = @LIBOBJS@
 libgrib_api_la_DEPENDENCIES = grib_api.h $(libgrib_api_la_LIBADD)
-
+libgrib_api_la_LDFLAGS = -no-undefined
 
 # set the include path
 INCLUDES=  -I.
@@ -311,6 +311,6 @@ EXTRA_DIST= griby.y gribl.l grib_accesso
             grib_bits_fast_big_endian_simple.c grib_bits_any_endian_simple.c \
             grib_bits_fast_big_endian_omp.c grib_bits_any_endian_omp.c
 
-include $(DEVEL_RULES)
+include $(srcdir)/$(DEVEL_RULES)
 
 
--- origsrc/grib_api-1.9.5/tests/Makefile.am	2011-01-02 02:34:34.400457400 +0900
+++ src/grib_api-1.9.5/tests/Makefile.am	2011-01-02 12:34:07.598747200 +0900
@@ -33,7 +33,7 @@
 
      LDADD = $(top_builddir)/src/libgrib_api.la $(EMOS_LIB)
 
-     INCLUDES   = -I$(top_builddir)/src
+     INCLUDES   = -I$(top_builddir)/src -I$(top_srcdir)/src
 
      EXTRA_DIST = $(TESTS) mf.rules filter_rules include.sh
    
--- origsrc/grib_api-1.9.5/tigge/Makefile.am	2011-01-02 02:34:34.410471800 +0900
+++ src/grib_api-1.9.5/tigge/Makefile.am	2011-01-02 12:43:30.803096100 +0900
@@ -10,7 +10,7 @@ tigge_name_SOURCES      =  tigge_name.c
 tigge_split_SOURCES      =  tigge_split.c
 tigge_accumulations_SOURCES      =  tigge_accumulations.c
 
-INCLUDES =  -I$(top_builddir)/src
+INCLUDES =  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
--- origsrc/grib_api-1.9.5/tools/Makefile.am	2011-01-02 02:34:34.410471800 +0900
+++ src/grib_api-1.9.5/tools/Makefile.am	2011-01-02 04:03:26.914865000 +0900
@@ -58,7 +58,7 @@ gaussian_SOURCES     =  gaussian.c
 gg_sub_area_check_SOURCES     =  gg_sub_area_check.c
 grib1to2_SOURCES = grib1to2.txt
 
-INCLUDES =  -I$(top_builddir)/src
+INCLUDES =  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = libgrib_tools.la $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
@@ -68,7 +68,7 @@ DEPENDENCIES = $(LDADD)
 CLEANFILES = libgrib_tools.la
 
 grib1to2$(EXEEXT): grib1to2.txt
-	sed "s:toolsdir:$(bindir):" grib1to2.txt > grib1to2
+	sed "s:toolsdir:$(bindir):" $(srcdir)/grib1to2.txt > grib1to2
 	chmod +x grib1to2
 
 noinst_HEADERS = grib_tools.h grib_msg_types.h
