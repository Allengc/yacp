--- origsrc/rudesocket-1.2.0/Makefile.am	2008-01-30 03:53:43.000000000 +0900
+++ src/rudesocket-1.2.0/Makefile.am	2011-08-18 17:39:27.405612000 +0900
@@ -49,8 +49,8 @@ librudesocket_la_SOURCES = 	src/rude_soc
 	src/socket_tcpclient.cpp \
 	src/socket_tcpclient.h
 
-librudesocket_la_LDFLAGS = -version-info 1:2:0
-librudesocket_la_LIBADD = -lssl
+librudesocket_la_LDFLAGS = -version-info 1:2:0 -no-undefined
+librudesocket_la_LIBADD = @OPENSSL_LIBS@
 
 
 pkginclude_HEADERS = src/socket.h
--- origsrc/rudesocket-1.2.0/configure.ac	2008-01-30 03:54:34.000000000 +0900
+++ src/rudesocket-1.2.0/configure.ac	2011-08-18 17:39:09.850368800 +0900
@@ -55,11 +55,11 @@ AC_ARG_WITH(openssl,
 ],
 [   AC_MSG_RESULT(yes)
 
-	AC_CHECK_LIB(ssl, main,, AC_MSG_ERROR(RudeSocket requires libssl from http://www.openssl.org/))
+PKG_CHECK_MODULES(OPENSSL, openssl)
+
 	printf "Using openssl";
    CFLAGS="$CFLAGS -DUSING_OPENSSL";
    CXXFLAGS="$CXXFLAGS -DUSING_OPENSSL";
-	LIBS="$LIBS -lssl";
 	USING_OPENSSL=yes
 	AC_SUBST(USING_OPENSSL)
 ],
