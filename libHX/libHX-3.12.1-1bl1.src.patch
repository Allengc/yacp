--- origsrc/libHX-3.12.1/src/Makefile.am	2011-12-15 20:22:37.000000000 +0900
+++ src/libHX-3.12.1/src/Makefile.am	2012-03-09 19:19:14.235424200 +0900
@@ -9,7 +9,7 @@ libHX_la_SOURCES = deque.c dl.c format.c
                    mc.c misc.c opt.c \
                    rand.c string.c time.c ${mingw32_extra} ${proc_sources}
 libHX_la_LIBADD  = ${libdl_LIBS} ${libpthread_LIBS} ${librt_LIBS}
-libHX_la_LDFLAGS = -version-info 28:0:0 \
+libHX_la_LDFLAGS = -version-info 28:0:0 -no-undefined \
                    -Wl,--version-script=${srcdir}/libHX.map
 libHX_la_DEPENDENCIES = libHX.map
 
@@ -22,7 +22,7 @@ endif
 
 libHX_rtcheck_la_SOURCES = rtcheck.c
 libHX_rtcheck_la_LIBADD  = ${libdl_LIBS}
-libHX_rtcheck_la_LDFLAGS = -avoid-version -module \
+libHX_rtcheck_la_LDFLAGS = -avoid-version -module -no-undefined \
                            -Wl,--version-script=${srcdir}/libHX.map
 
 check_PROGRAMS     = tc-compile tc-cast tc-deque tc-dir tc-format tc-link \
@@ -48,6 +48,7 @@ tc_realpath_LDADD  = libHX.la
 tc_shconfig_LDADD  = libHX.la
 tc_string_LDADD    = libHX.la
 tc_time_LDADD      = libHX.la
+TESTS = ${check_PROGRAMS}
 
 if HAVE_CXX
 check_PROGRAMS    += tx-compile tx-cast tx-deque tx-dir tx-list tx-list2 \
--- origsrc/libHX-3.12.1/src/tc-shconfig.c	2011-12-15 20:22:37.000000000 +0900
+++ src/libHX-3.12.1/src/tc-shconfig.c	2012-03-09 19:25:34.175881800 +0900
@@ -53,8 +53,8 @@ int main(int argc, const char **argv)
 		fprintf(stderr, "HX_init: %s\n", strerror(-ret));
 		return EXIT_FAILURE;
 	}
-	t_shconfig((argc >= 2) ? argv[1] : "tc-shconf.c");
-	t_shconfig2((argc >= 2) ? argv[1] : "tc-shconf.c");
+	t_shconfig((argc >= 2) ? argv[1] : "tc-shconfig.c");
+	t_shconfig2((argc >= 2) ? argv[1] : "tc-shconfig.c");
 	HX_exit();
 	return EXIT_SUCCESS;
 }
