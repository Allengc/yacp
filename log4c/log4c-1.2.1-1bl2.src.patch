--- origsrc/log4c-1.2.1/configure.in	2007-09-25 04:12:16.000000000 +0900
+++ src/log4c-1.2.1/configure.in	2010-10-30 10:02:27.740520000 +0900
@@ -37,14 +37,14 @@ AC_DEFINE(_GNU_SOURCE,1,"POSIXandGNU ext
 #.
 AC_PROG_YACC
 AC_PROG_CC
+AC_PROG_CXX
 AC_PROG_CPP
 AM_PROG_LEX
 AC_PROG_AWK
 AC_PROG_INSTALL
 AC_PROG_LN_S
 AC_PROG_MAKE_SET
-AC_PROG_RANLIB
-AC_PROG_LIBTOOL
+LT_INIT(win32-dll)
 
 # platform idioms
 case "$host" in
@@ -202,7 +202,11 @@ AC_ARG_WITH(expat,
                     with_expat=yes)
 if test x$with_expat = xyes ; then
  use_expat=yes
- AM_PATH_EXPAT(1.95.1)
+ AC_CHECK_HEADERS(expat.h)
+ EXPAT_CFLAGS=""
+ AC_SUBST(EXPAT_CFLAGS)
+ EXPAT_LIBS="-lexpat"
+ AC_SUBST(EXPAT_LIBS)
 fi
 dnl AC_MSG_NOTICE([value of with_expat = $with_expat no_expat =  $no_expat use_expat= $use_expat])
 AM_CONDITIONAL(USE_EXPAT, test  "x$use_expat" = "xyes" )
--- origsrc/log4c-1.2.1/src/log4c/Makefile.am	2007-09-25 04:12:16.000000000 +0900
+++ src/log4c-1.2.1/src/log4c/Makefile.am	2010-10-30 10:00:27.381145000 +0900
@@ -27,7 +27,7 @@ if WITH_ROLLINGFILE
                           rollingpolicy.c rollingpolicy_type_sizewin.c
 endif  
 
-liblog4c_la_LDFLAGS = -version-info @LT_VERSION@
+liblog4c_la_LDFLAGS = -version-info @LT_VERSION@ -no-undefined
 liblog4c_la_LIBADD  = ../sd/liblog4c_sd.la
 
 pkginclude_HEADERS = \
